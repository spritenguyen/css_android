// ==UserScript==
// @name        YouTube JS Engine Tamer
// @namespace   UserScripts
// @match       https://www.youtube.com/*
// @match       https://m.youtube.com/*
// @version     0.16.16.1
// @license     MIT
// @author      CY Fung
// @icon        https://raw.githubusercontent.com/cyfung1031/userscript-supports/main/icons/yt-engine.png
// @description To enhance YouTube performance by modifying YouTube JS Engine
// @grant       none
// @require     https://cdn.jsdelivr.net/gh/cyfung1031/userscript-supports@7221a4efffd49d852de0074ec503d4febb99f28b/library/nextBrowserTick.min.js
// @run-at      document-start
// @unwrap
// @inject-into page
// @allFrames   true
// ==/UserScript==
(()=>{const e=window.WeakMapOriginal||window.WeakMap,n=!1,o=!1,i=new Set(["hostElement72","parentComponent72","localVisibilityObserver_72","cachedProviderNode_72","__template72","__templatizeOwner72","__templateInfo72","__dataHost72","__CE_shadowRoot72","elements_72","ky36","kz62","m822","disabled","allowedProps","filledButtonOverrides","openPopupConfig","supportsInlineActionButtons","allowedProps","dimension","loadTime","pendingPaint","countdownDurationMs","countdownMs","lastCountdownTimeMs","rafId","playerProgressSec","detlaSincePausedSecs","behaviorActionMap","selected","maxLikeCount","maxReplyCount","isMouseOver","respectLangDir","noEndpoints","objectURL","buttonOverrides","queuedMessages","STEP","BLOCK_ON","MIN_PROGESS","MAX_PROGESS","DISMISSED_CONTENT_KEYSPACE","followUpDialogPromise","followUpDialogPromiseResolve","followUpDialogPromiseReject","hoverJobId","JSC$14573_touched","toggleable","isConnected","scrollDistance","dragging","dragMouseStart","dragOffsetStart","containerWidthDiff","disableDeselectEvent","emojiSize","buttonOverride","shouldUseStickyPreferences","longPressTimeoutId","observeVisibleOption","observeHiddenOption","observePrescanOption","visibilityMonitorKeys","observeVisibleOption","observeHiddenOption","observePrescanOption","visibilityMonitorKeys","clearTimeout","switchTemplateAtRegistration","hasUnmounted","switchTemplateAtRegistration","stopKeyboardEventPropagation","tangoConfiguration","itemIdToDockDurationMap","actionMap","emojiManager","inputMethodEditorActive","suggestionIndex","JSC$10745_lastSuggestionRange","actionMap","asyncHandle","shouldAnimateIn","lastFrameTimestamp","scrollClampRaf","scrollRatePixelsPerSecond","scrollStartTime","scrollStopHandle"]),r=("undefined"!=typeof AbortSignal&&"function"==typeof(AbortSignal||0).timeout&&"undefined"!=typeof navigator&&/\b(Macintosh|Mac\s*OS)\b/i.test((navigator||0).userAgent||""),this instanceof Window?this:window),a="jswylcojvzts";if(r[a])throw new Error("Duplicated Userscript Calling");r[a]=!0;const l=(self||0).nextBrowserTick||0,s=l||(e=>e());let c=0;const d=(async()=>{})().constructor,u=((e,t)=>{const n=(n,o)=>{e=n,t=o};return class extends d{constructor(o=n){super(o),o===n&&(this.resolve=e,this.reject=t)}}})(),p=(e,t)=>{let n=e.toFixed(t),o=""+ +n;return o.length>n.length?n:o};let f=new u,y="function"==typeof webkitRequestAnimationFrame?window.webkitRequestAnimationFrame.bind(window):window.requestAnimationFrame.bind(window);const h=e=>y(c?e:t=>{f.then((()=>{e(t)}))});window.requestAnimationFrame=h;const m=e=>e?e.polymerController||e.inst||e||0:e||0,g="function"==typeof WeakRef?e=>e?new WeakRef(e):null:e=>e||null,_=e=>e&&e.deref?e.deref():e;"function"==typeof Document.prototype.requestStorageAccessFor&&(Document.prototype.requestStorageAccessFor=void 0,console.log("[yt-js-engine-tamer]","requestStorageAccessFor is removed."));const b=e=>(e=e||location,"/watch"===location.pathname||location.pathname.startsWith("/live/")),w="undefined"!=typeof customElements&&"function"==typeof(customElements||0).whenDefined,v=w?d.resolve(0):new d((e=>{const t="ytI-ce-registry-created";if("undefined"==typeof customElements){"__CE_registry"in document||Object.defineProperty(document,"__CE_registry",{get(){},set(e){return"object"==typeof e&&(delete this.__CE_registry,this.__CE_registry=e,this.dispatchEvent(new CustomEvent(t))),!0},enumerable:!1,configurable:!0});let n=o=>{document.removeEventListener(t,n,!1);const i=e;e=null,n=null,i()};document.addEventListener(t,n,!1)}else e()})),C=w?e=>customElements.whenDefined(e):e=>v.then((()=>customElements.whenDefined(e)));performance.timeOrigin>9&&(()=>{if(performance.now23||performance.now16||"function"!=typeof Performance.prototype.now)return;const e=performance.now23=Performance.prototype.now;let t=0,n=0,o=(performance.timeOrigin%7+1)/7-.01/7;performance.now=performance.now16=function(){const i="function"==typeof(this||0).now23?this.now23()+o:e.call(performance)+o;return n+.0015<(n=i)?t=0:t<.001428?t+=1e-6/7:(t=0,o+=1/7),i+t};let i="";if(`${performance.now()}`==`${performance.now()}`){const e="performance.now is modified but performance.now() is not strictly increasing.",t="performance.now cannot be modified and performance.now() is not strictly increasing.";i=performance.now!==performance.now16?e:t}i&&console.warn(i)})(),"function"==typeof Node.prototype.removeChild&&"function"!=typeof Node.prototype.removeChild062&&(Node.prototype.removeChild062=Node.prototype.removeChild,Node.prototype.removeChild=function(e){return"function"!=typeof this.__shady_native_removeChild||e instanceof Node&&e.parentNode===this?this.removeChild062(e):e instanceof Element&&"tp-yt-paper-tooltip"===e.is||console.warn("[yt-js-engine-tamer] Node is not removed from parent",{parent:this,child:e}),e}),(t=>{const n=e=>{e.patchOnDemand=!0,e.preferPerformance=!0,e.noPatch=!0},o=(e,t)=>{if(!e||"object"!=typeof e)return!1;const n=Object.getOwnPropertyDescriptors(e);if(n.length<=t)return!1;let o=0;for(const e in n){const t=n[e];if(!t||t.get||t.set||!t.enumerable||!t.configurable)return!1;if(!("value"in t)||"function"==typeof t.value)return!1;o++}return o>t};let i,r=0;const a=Object.getOwnPropertyDescriptor(window,"ShadyDOM");if(a&&a.configurable&&a.value&&a.enumerable&&a.writable&&(i=a.value,i&&"object"==typeof i&&o(i,0)&&(n(i),r=1)),a&&a.configurable&&a.value&&a.enumerable&&a.writable&&!a.get&&!a.set);else if(a)return void console.log(3719,"[yt-js-engine-tamer] FIX::ShadyDOM is not applied [ PropertyDescriptor issue ]",a);const l=new e;console.log(3719,"[yt-js-engine-tamer] FIX::ShadyDOM << 01 >>",i);const s=()=>({get(){let e=l.get(this);return"object"==typeof e&&(e=_(e)||void l.delete(this)),e},set(e){return l.set(this,g(e)),!0},enumerable:!0,configurable:!0});function c(e){const n=e;if(r<3&&"function"==typeof t&&"function"==typeof n.Wrapper&&1===n.Wrapper.length&&"object"==typeof(n.Wrapper.prototype||0)){let e={node:null};Object.setPrototypeOf(e,Element.prototype);let t=new n.Wrapper(e),o=Object.getOwnPropertyDescriptor(t,"node");o.configurable&&o.enumerable&&!o.get&&!o.set&&o.writable&&o.value===e&&!Object.getOwnPropertyDescriptor(n.Wrapper.prototype,"node")&&(Object.defineProperty(n.Wrapper.prototype,"node",s()),console.log("[yt-js-engine-tamer] FIX::ShadyDOM << WEAKREF_ShadyDOM >>"))}}let d=null;const u=function(e){if(e instanceof ShadowRoot||e instanceof ShadyDOM.Wrapper)return e;if(d){const t=_(d.get(e));t&&(d.delete(e),l.set(e,g(t)))}let t=_(l.get(e));return t||(t=new ShadyDOM.Wrapper(e),l.set(e,g(t))),t};function p(t){const n=t,o=Object.getOwnPropertyDescriptor(e.prototype,"get");if(!(o&&o.writable&&!o.enumerable&&o.configurable&&o.value)||o.get||o.set)return;let i=new Set;const r=o.value;e.prototype.get=function(e){return i.add(this),e};try{let e={node:null};Object.setPrototypeOf(e,Element.prototype),n.wrapIfNeeded(e),n.wrap(e)}catch(e){}if(e.prototype.get=r,1!==i.size)return void i.clear();const a=i.values().next().value;a instanceof e&&(d=a,"function"==typeof n.wrap&&1===n.wrap.length&&(n.wrap=function(e){return u(e)}),"function"==typeof n.wrapIfNeeded&&1===n.wrapIfNeeded.length&&(n.wrapIfNeeded=function(e){return console.log(3719,"[yt-js-engine-tamer] (OMIT_ShadyDOM) function call - wrapIfNeeded"),u(e)}))}function f(e){const t=e,o=t.settings;if(!0!==o.inUse||!0!==t.inUse||!0!==(o.handlesDynamicScoping||t.handlesDynamicScoping))return console.log(3719,"[yt-js-engine-tamer] OMIT_ShadyDOM is not applied [02]",window.ShadyDOM),!1;c(t),r<3&&(n(o),n(t),t.isShadyRoot=function(){return console.log(3719,"[yt-js-engine-tamer] (OMIT_ShadyDOM) function call - isShadyRoot"),!1},p(t),t.patchElementProto=function(){console.log(3719,"[yt-js-engine-tamer] (OMIT_ShadyDOM) function call - patchElementProto")},t.patch=function(){console.log(3719,"[yt-js-engine-tamer] (OMIT_ShadyDOM) function call - patch")})}if(i&&"function"==typeof i.Wrapper&&"object"==typeof i.settings&&"function"==typeof i.wrap){const e=i;if(!1===function(e){const t=e,o=t.settings;if(!0!==o.inUse||!0!==t.inUse||!0!==(o.handlesDynamicScoping||t.handlesDynamicScoping))return console.log(3719,"[yt-js-engine-tamer] OMIT_ShadyDOM is not applied [02]",window.ShadyDOM),!1;c(t),r<3&&(n(o),n(t),p(t))}(e))return;return r=6,void console.log(3719,"[yt-js-engine-tamer] FIX::ShadyDOM << 02b >>",e)}delete window.ShadyDOM,Object.defineProperty(window,"ShadyDOM",{get:()=>i,set(e){let t=0;try{do{if(!e||!e.settings){if(r<1&&e&&"object"==typeof e&&o(e,0)){n(e),r=1;break}console.log(3719,"[yt-js-engine-tamer] FIX::ShadyDOM is not applied [nv:null]",e);break}const i=Object.getOwnPropertyDescriptor(this||{},"ShadyDOM");if(!(i&&i.configurable&&i.get&&i.set)){console.log(3719,"[yt-js-engine-tamer] OMIT_ShadyDOM is not applied [ incorrect PropertyDescriptor ]",e);break}if(!1===f(e))break;r=3,console.log(3719,"[yt-js-engine-tamer] FIX::ShadyDOM << 02a >>",e),t=1}while(0)}catch(e){console.log("[yt-js-engine-tamer] FIX::ShadyDOM << ERROR >>",e)}return t?(delete this.ShadyDOM,this.ShadyDOM=e):i=e,!0},enumerable:!1,configurable:!0})})("undefined"!=typeof WeakRef?WeakRef:function(){}),(()=>{const e=Object.getOwnPropertyDescriptor(Map.prototype,"size");if(!e||!0!==e.configurable)return;let t=null;const n={configurable:!0,enumerable:!0,get:function(){throw t=this,new Error}};Object.defineProperty(Map.prototype,"size",n);try{XMLHttpRequest.prototype.open.call(0)}catch(e){}if(Object.defineProperty(Map.prototype,"size",e),!t)return;const o=[...t.entries()];t.clear(),console.log("[yt-js-engine-tamer] propNeedles is cleared from scriptlet",o,t)})();{const e=window.URL||new Function("return URL")(),t=e.createObjectURL.bind(e);XMLHttpRequest=(()=>{const e=XMLHttpRequest;if("__xmMc8__"in e.prototype)return e;const n=t(new Blob([],{type:"text/plain"})),o=class extends e{constructor(...e){super(...e)}open(e,t,...o){let i=!1;if(t&&"string"==typeof t){if("string"==typeof t){let e="/"===t[0]?`.youtube.com${t}`:`${t}`;e.includes("googleads")||e.includes("doubleclick.net")||e.includes(".youtube.com/pagead/")||e.includes(".youtube.com/ptracking")||e.includes(".youtube.com/youtubei/v1/log_event?")?i=!0:e.includes(".youtube.com/api/stats/")?(e.includes(".youtube.com/api/stats/qoe?")||e.includes(".youtube.com/api/stats/ads?"))&&(i=!0):(e.includes("play.google.com/log")||e.includes(".youtube.com//?"))&&(i=!0)}}else i=!0;return i?(this.__xmMc8__=2,super.open("GET",n)):(this.__xmMc8__=1,super.open(e,t,...o))}send(...e){return 1===this.__xmMc8__?super.send(...e):2===this.__xmMc8__?super.send():(console.log("[yt-js-engine-tamer]","xhr warning"),super.send(...e))}};return o.prototype.__xmMc8__=0,((e,t)=>{const n=Object.getOwnPropertyDescriptors(t);for(const t in n)Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,n[t])})(o.prototype,e.prototype),o})()}if("function"!=typeof EventTarget.prototype.addEventListener52178&&"function"==typeof EventTarget.prototype.addEventListener){let e=function(e){if(window.Polymer&&window.Polymer.Element){let t;if(t=e.path||e.composedPath&&e.composedPath())for(const e of t){const t=m(e);e.overscrollConfig&&(e.overscrollConfig=void 0),t.overscrollConfig&&(t.overscrollConfig=void 0)}}else{let t=e.target;for(;t instanceof Element;t=t.parentElement){const e=m(t);t.overscrollConfig&&(t.overscrollConfig=void 0),e.overscrollConfig&&(e.overscrollConfig=void 0)}}},t=null,n=()=>{let e=0;const t={};Object.setPrototypeOf(t,HTMLElement.prototype);const n=new Proxy(t,{get(e,t){throw`ErrorF31.get(${t})`},set(e,t,n){throw`ErrorF33.set(${t}, ${n})`}}),o=new Proxy(t,{get(t,n){if("scrollTop"===n)return e|=8,0;if("overscrollConfig"!==n){if("scrollHeight"===n||"clientHeight"===n||"offsetHeight"===n)return 640;if("scrollLeft"===n)return e|=8,0;if("scrollWidth"===n||"clientWidth"===n||"offsetWidth"===n)return 800;throw`ErrorF45.get(${n})`}e|=16},set(e,t,n){throw`ErrorF47.set(${t}, ${n})`}}),i={};Object.setPrototypeOf(i,WheelEvent.prototype);return{euzObj:n,euyEvt:new Proxy(i,{get(t,n){if("deltaY"===n||"deltaX"===n)return e|=1,-999;if("target"===n)return e|=2,o;if("path"===n||"composedPath"===n)return e|=2,[o];throw`ErrorF51.get(${n})`},set(e,t,n){throw`ErrorF53.set(${t}, ${n})`}}),setVal:t=>{e=t},getVal:()=>e}},o=e=>{let o="",i=null;try{const{euzObj:o,euyEvt:i,getVal:r,setVal:a}=t||(t=n());if(a(0),void 0!==e.call(o,i))throw"ErrorF99";throw`RESULT${r()}`}catch(e){i=e}return i=`${i}`||"null",i.length>20&&(i=`${i.substring(0,20)}...`),o=i,"RESULT27"===o||"RESULT0"===o||o.startsWith("RESULT")&&console.log("wheel eventListener - RESULT",o,e),o},i=!1;EventTarget.prototype.addEventListener52178=EventTarget.prototype.addEventListener,EventTarget.prototype.addEventListener=function(r,a,l=void 0){if("wheel"===r&&!l&&"function"==typeof a&&1===a.length){if("RESULT27"===(a.yaujmoms||(i?"IGNORE":a.yaujmoms=o(a))))return this.overscrollConfigDisable=!0,void(i||(i=!0,n=o=null,t=null,e=null));i||this.overscrollConfigDisable||(this.overscrollConfigDisable=!0,this.addEventListener52178("wheel",e,{passive:!1}))}return this.addEventListener52178(r,a,l)}}const{pageMediaWatcher:S,shortcutKeysFixer:E,keyboardController:k}=(()=>{let t=null,n=!1,o=0,i=!1,a=!0,l=null,s=null,c="",p=0;const f=new e;let y=null;const h=()=>null!==y?y:y=getSelection()+"";let m=null;const w=function(){const e=this.init91(),n=this[this.__cPzfo__||"__NIL__"];if(n){try{(e=>{const t=new Set,n=e.api,o=function(){},i=new Proxy({},{get:(e,t)=>"get"===t?o:i}),r=function(){return i},a=new Proxy({},{get(e,t){if(t in n){if("function"==typeof n.constructor.prototype[t])return r;let e=Object.getOwnPropertyDescriptor(n,t);if(e&&e.value){if(!e.writable)return e.value;if("string"==typeof e.value)return"";if("number"==typeof e.value)return 0;if("boolean"==typeof e.value)return!1;if(e.value&&"object"==typeof e.value)return{}}}},set(e,t){throw"mwSet"}}),l=new Proxy({},{get(t,n){if("api"===n)return a;if(n in e){if("function"==typeof e.constructor.prototype[n])return r;let t=Object.getOwnPropertyDescriptor(e,n);if(t&&t.value){if(!t.writable)return t.value;if("string"==typeof t.value)return"";if("number"==typeof t.value)return 0;if("boolean"==typeof t.value)return!1;if(t.value&&"object"==typeof t.value)return{}}}},set(e,n,o){throw"boolean"==typeof o&&t.add(n),`mqSet(${n},${o})`}});let s="";try{s=`RESULT::${e.handleGlobalKeyUp.call(l,9,!1,!1,!1,!1,"Tab","Tab")}`}catch(e){s=`ERROR::${e}`}if(1===t.size){const n=t.values().next().value;s===`ERROR::mqSet(${n},true)`&&(e.__uZWaD__=n)}console.log("[yt-js-engine-tamer] global shortcut control",{__uZWaD__:e.__uZWaD__})})(n)}catch(e){}return t=g(n),n&&!n.hVhtg&&(n.hVhtg=1,n.handleGlobalKeyUp91=n.handleGlobalKeyUp,n.handleGlobalKeyUp=v.handleGlobalKeyUp,n.handleGlobalKeyDown91=n.handleGlobalKeyDown,n.handleGlobalKeyDown=v.handleGlobalKeyDown,n.__handleGlobalKeyBefore__=v.__handleGlobalKeyBefore__,n.__handleGlobalKeyAfter__=v.__handleGlobalKeyAfter__),m&&(m.resolve(),m=null),e}},v={__handleGlobalKeyBefore__(e,t,o,r,a,l,c,d){if(d){const e=f.get(d);if(6===e&&""!==h());else{if(1===e||2===e||5===e)return!1;if((6!==e||s===document.activeElement)&&""!==h())return!1}}if(32===e&&!1===t&&!1===o&&!1===r&&!1===a&&" "===l&&"Space"===c&&!n&&(i=S()))return;if(d&&("Space"===c||"Enter"===c)){const e=f.get(d);if(4===e||5===e)return!1}if(s===d&&""!==h())return!1},__handleGlobalKeyAfter__(e,t,r,a,s,c,u,f,y){if(y&&e>=32&&1===o&&Date.now()-p<40&&f===document.activeElement){if(32===e&&!1===t&&!1===r&&!1===a&&!1===s&&" "===c&&"Space"===u&&!n&&(i=S()))return;const o=_(l);let p=!1;(o&&(4===o.readyState||1===o.readyState)&&2===o.networkState&&o.duration>.01||o&&!o.paused&&!o.muted&&o.duration>.01)&&(p=!0),p&&d.resolve().then((()=>f===document.activeElement&&f.blur())).then((e=>{!1!==e&&o.focus()}))}},handleGlobalKeyUp(e,t,n,o,i,r,a){const l=document.activeElement;if(!1===("function"==typeof this.__handleGlobalKeyBefore__?this.__handleGlobalKeyBefore__(e,t,n,o,i,r,a,l):void 0))return!1;const s=this.handleGlobalKeyUp91(e,t,n,o,i,r,a);return"function"==typeof this.__handleGlobalKeyAfter__&&this.__handleGlobalKeyAfter__(e,t,n,o,i,r,a,l,s),s},handleGlobalKeyDown(e,t,n,o,i,r,a,l){const s=document.activeElement;if(!1===("function"==typeof this.__handleGlobalKeyBefore__?this.__handleGlobalKeyBefore__(e,t,n,o,i,r,a,s):void 0))return!1;const c=this.handleGlobalKeyDown91(e,t,n,o,i,r,a,l);return"function"==typeof this.__handleGlobalKeyAfter__&&this.__handleGlobalKeyAfter__(e,t,n,o,i,r,a,s,c),c}};let C=null;const S=()=>{const e=(r.yt||0).config_||(r.ytcfg||0).data_||0;if(i=!1,e&&e.EXPERIMENT_FLAGS&&e.EXPERIMENT_FLAGS.web_speedmaster_spacebar_control&&(i=!0),e&&e.EXPERIMENTS_FORCED_FLAGS&&e.EXPERIMENTS_FORCED_FLAGS.web_speedmaster_spacebar_control&&(i=!0),null===C){const t=(((e||0).WEB_PLAYER_CONTEXT_CONFIGS||0).WEB_PLAYER_CONTEXT_CONFIG_ID_KEVLAR_WATCH||0).serializedExperimentFlags;C=!!t&&(t.includes("web_enable_speedmaster=true")&&t.includes("web_speedmaster_spacebar_control=true")&&t.includes("web_speedmaster_updated_edu=true"))}return C||(i=!1),i};return{pageMediaWatcher:()=>{document.addEventListener("yt-navigate",(()=>{o=0})),document.addEventListener("yt-navigate-start",(()=>{o=0})),document.addEventListener("yt-navigate-cache",(()=>{o=0})),document.addEventListener("yt-navigate-finish",(()=>{o=1})),document.addEventListener("durationchange",(()=>{for(const e of document.querySelectorAll("#movie_player video[src], #movie_player audio[src]"))if(e.duration>.01){if(e.closest("[hidden]"))continue;return void(l=g(e))}}),{capture:!0,passive:!0}),document.addEventListener("selectionchange",(e=>{e&&e.isTrusted&&e instanceof Event&&(y=null,e.target instanceof Node&&(s=e.target))}),{capture:!0,passive:!0}),document.addEventListener("pointerdown",(e=>{e.isTrusted&&e instanceof Event&&(p=Date.now())}),{capture:!0,passive:!0}),document.addEventListener("pointerup",(e=>{e.isTrusted&&e instanceof Event&&(p=Date.now())}),{capture:!0,passive:!0}),document.addEventListener("keydown",(e=>{e.isTrusted&&e instanceof Event&&(p=Date.now())}),{capture:!0,passive:!0}),document.addEventListener("keyup",(e=>{e.isTrusted&&e instanceof Event&&(p=Date.now())}),{capture:!0,passive:!0})},shortcutKeysFixer:()=>{let e=0;const u=u=>{if(u.isTrusted&&u instanceof Event&&(p=Date.now()),n||!u.isTrusted||!(u instanceof KeyboardEvent))return;if(!o)return;if(!0===u.defaultPrevented)return;const y=_(t);if(!y)return;const m=_(l);if(!m)return;const g=((e,t)=>{let n=0;const o=document.activeElement;if(o){const i=f.get(o);"number"==typeof i?n=i:(o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement?n=1:o instanceof HTMLButtonElement||o instanceof HTMLIFrameElement||o instanceof HTMLImageElement||o instanceof HTMLEmbedElement?n=2:(o instanceof HTMLElement&&o.closest("[role]")&&(n=5),(o instanceof HTMLDivElement||o instanceof HTMLAnchorElement||!(o instanceof HTMLElement)&&o instanceof Element)&&(n=2)),(2===n||5===n)&&o instanceof HTMLElement&&o.contains(t)&&(n=0),(2===n||5===n)&&e&&e.target&&e.target===o&&(o.closest("[contenteditable], input, textarea")?n=5:o.closest("button")&&(n=4)),o.closest("#movie_player")&&(n=6),f.set(o,n))}return n})(u,m);if(6===g&&""!==h());else{if(1===g||2===g||5===g)return;if((6!==g||s===document.activeElement)&&""!==h())return}if("Space"===u.code&&!(()=>{const e=(r.yt||0).config_||(r.ytcfg||0).data_||0;return a=!1,e&&e.EXPERIMENT_FLAGS&&e.EXPERIMENT_FLAGS.global_spacebar_pause&&(a=!0),e&&e.EXPERIMENTS_FORCED_FLAGS&&e.EXPERIMENTS_FORCED_FLAGS.global_spacebar_pause&&(a=!0),a})())return;if(c=c||y.__uZWaD__||"",c&&!0===y[c]&&(y[c]=!1),u.shiftKey||u.ctrlKey||u.altKey||u.metaKey)return;let w;const v=!("Space"!==u.code||u.shiftKey||u.ctrlKey||u.altKey||u.metaKey);let C=!1;if(v&&!(i=S())){const e=(e=>{let t=null,n=null,o=null;try{t=e.getAppState(),n=e.getPlayerState(),o=e.getAdState()}catch(e){}return 5===t&&-1===o&&(1===n||2===n||3===n)})(y.api);e&&b()&&m.duration>.01&&(4===m.readyState||1===m.readyState)&&2===m.networkState&&(C=!0)}if("keydown"===u.type)if(C){const o=m.paused,i=++e;d.resolve().then((()=>{if(i!==e)return;if(m.paused!==o)return;const r=function(){const e=_(t);let o,i=null;n=!0;try{let t;o=0,o|=e.handleGlobalKeyDown(32,!1,!1,!1,!1," ","Space",!1)?1:0,c?!0===e[c]?(e[c]=!1,t=e):t=e:(i=new Set,t=new Proxy(e,{get(t,n,o){const r=t[n];return"boolean"!=typeof r||(i.add(n),"string"==typeof n&&n.length<=3&&!0===r&&1===i.length&&(c=n,e.__uZWaD__=c,r=!1)),r}})),o|=t.handleGlobalKeyUp(32,!1,!1,!1,!1," ","Space")?2:0}catch(e){console.log(e)}if(n=!1,i&&1===i.size){const t=i.values().next().value;c=t,e.__uZWaD__=c}return c&&!0===e[c]&&(e[c]=!1),o}();r||(o?api.playVideo():api.pauseVideo())})),w=!0}else n=!0,w=y.handleGlobalKeyDown(u.keyCode,u.shiftKey,u.ctrlKey,u.altKey,u.metaKey,u.key,u.code,u.repeat),n=!1,c&&!0===y[c]&&(y[c]=!1);else"keyup"===u.type&&(v&&C&&!(i=S())?w=!0:(n=!0,w=y.handleGlobalKeyUp(u.keyCode,u.shiftKey,u.ctrlKey,u.altKey,u.metaKey,u.key,u.code),n=!1,c&&!0===y[c]&&(y[c]=!1)));w&&(u.preventDefault(),u.stopImmediatePropagation(),u.stopPropagation())};document.addEventListener("keydown",u,{capture:!0}),document.addEventListener("keyup",u,{capture:!0})},keyboardController:async e=>{const n=re(e),o=ae(e),i=le(e);if(console.log("[QT,SV,DX]",[n,o,i]),!i)return;if(i===n||i===o)return;if("string"!=typeof i)return;let r="",a="";const l=new Proxy({},{get(e,t){throw"handleGlobalKeyUp"===t&&(a=r),"mbGet"},set(e,t,n){throw"mbSet"}}),s=new Proxy({},{get:(e,t)=>(r=t,l),set(e,t,n){throw"maSet"}});let c="";try{e[i].prototype.handleGlobalKeyUp.call(s)}catch(e){"mbGet"===e&&"string"==typeof a&&a.length>0&&(c=a)}if(!c)return;if("function"!=typeof e[i].prototype.init||0!==e[i].prototype.init.length)return;m=new u,e[i].prototype.__cPzfo__=c,e[i].prototype.init91=e[i].prototype.init,e[i].prototype.init=w,await m.then();const d=_(t),p=S();const f=S();console.log("[yt-js-engine-tamer] speedmaster by space (yt setting)",p,f),console.log("[yt-js-engine-tamer] p_a",d)}}})();S(),E();const P=(()=>{let e=new Set;function t(e,t){let n=function(e){return Array.from(e.values())}(e);return t.join(",")===n.join(",")}return e.add("value1"),e.add("value2"),e.add("value3"),"value1"===e.values().next().value&&(!!t(e,["value1","value2","value3"])&&(e.delete("value2"),"value1"===e.values().next().value&&(!!t(e,["value1","value3"])&&(e.add("value2"),"value1"===e.values().next().value&&(!!t(e,["value1","value3","value2"])&&(e.add("value4"),"value1"===e.values().next().value&&(!!t(e,["value1","value3","value2","value4"])&&(e.delete("value1"),e.delete("value3"),e.add("value3"),e.add("value1"),"value2"===e.values().next().value&&!!t(e,["value2","value4","value3","value1"])))))))))})(),O=Symbol(),D=Symbol(),A=Symbol(),I=new e,T=document.createElement("noscript");T.id="weakref-placeholder";const R={},j=(e,t)=>({get(){const n=this,o=n[e];if(!o)return null;const i=_(o);return!i&&t?("function"==typeof t&&t(n),T):i},set(t){return this[e]=t?g(t):null,!0},configurable:!0,enumerable:!0}),M=new e,L=Symbol(),x={get(e,t){if(t===L)return!0;const n=e[t];return"function"==typeof(n||0).deref?n.deref():n},set:(e,t,n)=>(n instanceof Node?e[t]=g(n):e[t]=n,!0)};(()=>{if("function"==typeof HTMLElement.prototype.hasOwnProperty72||"function"!=typeof HTMLElement.prototype.hasOwnProperty)return;const t=HTMLElement.prototype.hasOwnProperty72=HTMLElement.prototype.hasOwnProperty;let n=null,o=0;new Set;HTMLElement.prototype.hasOwnProperty=function(e){return 1!==arguments.length?t.apply(this,arguments):null!==n&&"string"==typeof e&&i.has(e)?(o++,n):this.hasOwnProperty72(e)};let r=!1;const a=function(){n=!0,o=0;const e=this.forwardDynamicProps72();return n=null,0!==o||r||(r=!0,console.log("[yt-js-engine-tamer] byPassCount = 0 in forwardDynamicProps")),o=0,e},l=e=>{"object"==typeof(e||0)&&"function"==typeof e.forwardDynamicProps&&"function"!=typeof e.forwardDynamicProps72&&(e.forwardDynamicProps72=e.forwardDynamicProps,0===e.forwardDynamicProps.length&&(e.forwardDynamicProps=a))},s=new e;Object.defineProperty(HTMLElement.prototype,"didForwardDynamicProps",{get(){return l(this.constructor.prototype),s.get(this)},set(e){return l(this.constructor.prototype),s.set(this,e),!0},enumerable:!1,configurable:!0}),v.then((()=>{"object"==typeof customElements&&"function"!=typeof customElements.define72&&"function"==typeof customElements.define&&2===customElements.define.length&&(customElements.define72=customElements.define,customElements.define=function(e,t){l(t.prototype);return this.define72(e,t)})}))})();const U=new e;let F=null;const N=e=>{if(null===F){const e=(window.yt||0).config_||0;F=!0===((e||0).EXPERIMENT_FLAGS||0).kevlar_should_maintain_stable_list}const t=function(t,n,o,i,r,a){return(t||0).length>=1?(void 0===a&&"string"==typeof n&&o&&"object"==typeof o&&this.is&&F&&(a=!o.clientSideToggleMenuItemRenderer),e.call(this,t,n,o,i,r,a)):e.call(this,void 0,n,void 0,i)};return t.originalFn=e,U.set(e,t),t},K=(()=>{const e=Symbol(),t={get:(t,n,o)=>"object"===n?_(t[e]):"__proxy312__"===n?1:t[n]},n={get:(t,n,o)=>"indexSplices"===n?_(t[e]):"__proxy312__"===n?1:t[n]};return o=>{if(o.rendererStamperApplyChangeRecord_||o.stampDomArraySplices_){const i=o.__proto__;if(!i.yzxer&&(i.rendererStamperApplyChangeRecord_||i.stampDomArraySplices_)){i.yzxer=1;const o=["rendererStamperApplyChangeRecord_","forwardRendererStamperChanges_","stampDomArraySplices_","stampDomArray_","deferRenderStamperBinding_"];for(const r of o){const o=`${r}$wq0iw_`,a=i[r];"function"==typeof a&&(i[o]||0===a.length||("stampDomArraySplices_"===r&&3===a.length?(i[o]=a,i[r]=function(r,a,l){return"string"==typeof r&&"string"==typeof a&&"object"==typeof l&&l&&l.indexSplices&&l.indexSplices.length>=1&&!l.indexSplices.rzgjr&&(l.indexSplices=l.indexSplices.map((n=>n.__proxy312__?n:(n[e]=g(n.object),n.object=null,new Proxy(n,t)))),l.indexSplices.rzgjr=1,l[e]=g(l.indexSplices),l.indexSplices=null,l=new Proxy(l,n),arguments[2]=l),i[o].call(this,r,a,l)}):"rendererStamperApplyChangeRecord_"===r&&a.length))}}}}})(),q=(e,t)=>{if(t&&e.ky36)return;if("function"==typeof e.onYtRendererstamperFinished&&!e.onYtRendererstamperFinished.km34){const t=e.onYtRendererstamperFinished,n=I.get(t)||function(){if(this.updateChildVisibilityProperties&&!this.markDirty)return t.apply(this,arguments);d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onYtRendererstamperFinished=n}if("function"==typeof e.onYtUpdateDescriptionAction&&!e.onYtUpdateDescriptionAction.km34){const t=e.onYtUpdateDescriptionAction,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onYtUpdateDescriptionAction=n}if("function"==typeof e.handleUpdateDescriptionAction&&!e.handleUpdateDescriptionAction.km34){const t=e.handleUpdateDescriptionAction,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.handleUpdateDescriptionAction=n}if("function"==typeof e.handleUpdateLiveChatPollAction&&!e.handleUpdateLiveChatPollAction.km34){const t=e.handleUpdateLiveChatPollAction,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.handleUpdateLiveChatPollAction=n}if("function"==typeof e.onTextChanged&&!e.onTextChanged.km34){const t=e.onTextChanged,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onTextChanged=n}if("function"==typeof e.onVideoDataChange&&!e.onVideoDataChange.km34){const t=e.onVideoDataChange,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onVideoDataChange=n}if("function"==typeof e.onVideoDataChange_&&!e.onVideoDataChange_.km34){const t=e.onVideoDataChange_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onVideoDataChange_=n}if("function"==typeof e.addTooltips_&&!e.addTooltips_.km34){const t=e.addTooltips_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.addTooltips_=n}if("function"==typeof e.updateRenderedElements&&!e.updateRenderedElements.km34){const t=e.updateRenderedElements,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.updateRenderedElements=n}if("function"==typeof e.loadPage_&&!e.loadPage_.km34){const t=e.loadPage_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.loadPage_=n}if("function"==typeof e.updatePageData_&&!e.updatePageData_.km34){const t=e.updatePageData_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.updatePageData_=n}if("function"==typeof e.onFocus_&&!e.onFocus_.km34){const t=e.onFocus_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onFocus_=n}if("function"==typeof e.onBlur_&&!e.onBlur_.km34){const t=e.onBlur_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onBlur_=n}if("function"==typeof e.buttonClassChanged_&&!e.buttonClassChanged_.km34){const t=e.buttonClassChanged_,n=I.get(t)||function(e,n){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.buttonClassChanged_=n}if("function"==typeof e.buttonIconChanged_&&!e.buttonIconChanged_.km34){const t=e.buttonIconChanged_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.buttonIconChanged_=n}if("function"==typeof e.dataChangedInBehavior_&&!e.dataChangedInBehavior_.km34){const t=e.dataChangedInBehavior_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.dataChangedInBehavior_=n}if("function"==typeof e.continuationsChanged_&&!e.continuationsChanged_.km34){const t=e.continuationsChanged_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.continuationsChanged_=n}if("function"==typeof e.forceChatPoll_&&!e.forceChatPoll_.km34){const t=e.forceChatPoll_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.forceChatPoll_=n}if("function"==typeof e.onEndpointClick_&&!e.onEndpointClick_.km34){const t=e.onEndpointClick_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onEndpointClick_=n}if("function"==typeof e.onEndpointTap_&&!e.onEndpointTap_.km34){const t=e.onEndpointTap_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onEndpointTap_=n}if("function"==typeof e.handleClick_&&!e.handleClick_.km34){const t=e.handleClick_,n=I.get(t)||function(e,n){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.handleClick_=n}if("function"==typeof e.onReadyStateChange_&&!e.onReadyStateChange_.km34){const t=e.onReadyStateChange_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onReadyStateChange_=n}if("function"==typeof e.onReadyStateChangeEntryPoint_&&!e.onReadyStateChangeEntryPoint_.km34){const t=e.onReadyStateChangeEntryPoint_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onReadyStateChangeEntryPoint_=n}if("function"==typeof e.readyStateChangeHandler_&&!e.readyStateChangeHandler_.km34){const t=e.readyStateChangeHandler_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.readyStateChangeHandler_=n}if("function"==typeof e.xmlHttpHandler_&&!e.xmlHttpHandler_.km34){const t=e.xmlHttpHandler_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.xmlHttpHandler_=n}if("function"==typeof e.executeCallbacks_&&!e.executeCallbacks_.km34){const t=e.executeCallbacks_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.executeCallbacks_=n}if("function"==typeof e.handleInvalidationData_&&!e.handleInvalidationData_.km34){const t=e.handleInvalidationData_,n=I.get(t)||function(e,n){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.handleInvalidationData_=n}if("function"==typeof e.onInput_&&!e.onInput_.km34){const t=e.onInput_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onInput_=n}if("function"==typeof e.trigger_&&!e.trigger_.km34){const t=e.trigger_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.trigger_=n}if("function"==typeof e.requestData_&&!e.requestData_.km34){const t=e.requestData_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.requestData_=n}if("function"==typeof e.onLoadReloadContinuation_&&!e.onLoadReloadContinuation_.km34){const t=e.onLoadReloadContinuation_,n=I.get(t)||function(e,n){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onLoadReloadContinuation_=n}if("function"==typeof e.onLoadIncrementalContinuation_&&!e.onLoadIncrementalContinuation_.km34){const t=e.onLoadIncrementalContinuation_,n=I.get(t)||function(e,n){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onLoadIncrementalContinuation_=n}if("function"==typeof e.onLoadSeekContinuation_&&!e.onLoadSeekContinuation_.km34){const t=e.onLoadSeekContinuation_,n=I.get(t)||function(e,n){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onLoadSeekContinuation_=n}if("function"==typeof e.onLoadReplayContinuation_&&!e.onLoadReplayContinuation_.km34){const t=e.onLoadReplayContinuation_,n=I.get(t)||function(e,n){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onLoadReplayContinuation_=n}if("function"==typeof e.onNavigate_&&!e.onNavigate_.km34){const t=e.onNavigate_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onNavigate_=n}if("function"==typeof e.ytRendererBehaviorDataObserver_&&!e.ytRendererBehaviorDataObserver_.km34){const t=e.ytRendererBehaviorDataObserver_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.ytRendererBehaviorDataObserver_=n}if("function"==typeof e.ytRendererBehaviorTargetIdObserver_&&!e.ytRendererBehaviorTargetIdObserver_.km34){const t=e.ytRendererBehaviorTargetIdObserver_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.ytRendererBehaviorTargetIdObserver_=n}if("function"==typeof e.unregisterRenderer_&&!e.unregisterRenderer_.km34){const t=e.unregisterRenderer_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.unregisterRenderer_=n}if("function"==typeof e.textChanged_&&!e.textChanged_.km34){const t=e.textChanged_,n=I.get(t)||function(e){if(void 0!==this.isAttached){const e=this.hostElement;if(!(e instanceof Node)||"NOSCRIPT"===e.nodeName)return}d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.textChanged_=n}if("function"==typeof e.searchChanged_&&!e.searchChanged_.km34){const t=e.searchChanged_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.searchChanged_=n}if("function"==typeof e.skinToneChanged_&&!e.skinToneChanged_.km34){const t=e.skinToneChanged_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.skinToneChanged_=n}if("function"==typeof e.onEmojiHover_&&!e.onEmojiHover_.km34){const t=e.onEmojiHover_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onEmojiHover_=n}if("function"==typeof e.onSelectCategory_&&!e.onSelectCategory_.km34){const t=e.onSelectCategory_,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onSelectCategory_=n}if("function"==typeof e.onShowEmojiVariantSelector&&!e.onShowEmojiVariantSelector.km34){const t=e.onShowEmojiVariantSelector,n=I.get(t)||function(e){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onShowEmojiVariantSelector=n}if("function"==typeof e.updateCategoriesAndPlaceholder_&&!e.updateCategoriesAndPlaceholder_.km34){const t=e.updateCategoriesAndPlaceholder_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.updateCategoriesAndPlaceholder_=n}if("function"==typeof e.watchPageActiveChanged_&&!e.watchPageActiveChanged_.km34){const t=e.watchPageActiveChanged_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.watchPageActiveChanged_=n}if("function"==typeof e.activate_&&!e.activate_.km34){const t=e.activate_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.activate_=n}if("function"==typeof e.onYtPlaylistDataUpdated_&&!e.onYtPlaylistDataUpdated_.km34){const t=e.onYtPlaylistDataUpdated_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onYtPlaylistDataUpdated_=n}(e=>{if(!e.stampDomArray_)return;const t=e.__proto__,n=t.stampDomArray_;t.stampDomArrayF001_||"function"!=typeof n||6!==n.length||(t.stampDomArrayF001_=1,t.stampDomArray_=U.get(n)||N(n))})(e);if("undefined"!=typeof DocumentTimeline&&"undefined"!=typeof WeakRef&&K(e),"function"==typeof e.tryRenderChunk_&&!e.tryRenderChunk_.km34){const t=e.tryRenderChunk_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.tryRenderChunk_=n}if("function"==typeof e.renderChunk_&&!e.renderChunk_.km34){const t=e.renderChunk_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.renderChunk_=n}if("function"==typeof e.deepLazyListObserver_&&!e.deepLazyListObserver_.km34){const t=e.deepLazyListObserver_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.deepLazyListObserver_=n}if("function"==typeof e.onItemsUpdated_&&!e.onItemsUpdated_.km34){const t=e.onItemsUpdated_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.onItemsUpdated_=n}if("function"==typeof e.requestRenderChunk_&&!e.requestRenderChunk_.km34){const t=e.requestRenderChunk_,n=I.get(t)||function(){d.resolve().then((()=>t.apply(this,arguments))).catch(console.log)};I.set(t,n),n.km34=1,e.requestRenderChunk_=n}},G=Symbol(),B=new e,V=new e,$=e=>function(){const t=m(this),n=t.hostElement||0,o=n?this.$||(m(i=this).$||i.$||0):0;var i;let r=n instanceof HTMLElement&&(o||!this.is);if(r&&!o&&!this.is){const e=n.nodeName;"string"!=typeof e||e.startsWith("DOM-")||(r=!1)}r&&("function"==typeof t.markDirty||"ytd-engagement-panel-section-list-renderer"===this.is)&&(r=!1),r?this[O]=(this[O]||d.resolve()).then((()=>e.apply(this,arguments))).catch(console.log):e.apply(this,arguments)};let H=window.HTMLElement;try{const e=document.createElement("template");e.innerHTML="<ytz-null361></ytz-null361>",H=e.content.firstChild.constructor}catch(e){}H.prototype.connectedCallback||(H.prototype.connectedCallback79=H.prototype.connectedCallback,H.prototype.connectedCallback=function(){let e;return this.connectedCallback79&&(e=this.connectedCallback79.apply(this,arguments)),e}),Object.defineProperty(Object.prototype,"connectedCallback",{get(){const e=this[G];return this.is&&(q(this,!0),e&&(this.ky36=1)),e},set(e){let t;return"function"==typeof e?(t=B.get(e)||$(e),t!==e&&(B.set(e,t),B.set(t,t),V.set(t,e))):t=e,this[G]=t,this.is&&q(this),!0},enumerable:!1,configurable:!0});const W=new d((e=>{"loading"!==document.readyState?e():window.addEventListener("DOMContentLoaded",e,!1)}));window.requestIdleCallback471||"function"!=typeof window.requestIdleCallback||(window.requestIdleCallback471=window.requestIdleCallback,window.requestIdleCallback=function(e,...t){return(this||window).requestIdleCallback471((async function(){await W.then(),e.call(this,...arguments)}),...t)}),W.then((()=>{let e=document.querySelector("style[nonce]");e=e?e.getAttribute("nonce"):null;const t=document.createElement("style");"string"==typeof e&&t.setAttribute("nonce",e),t.textContent="none-element-k47{order:0}",t.addEventListener("load",(()=>{f.resolve(),c=1}),!1),(document.body||document.head||document.documentElement).appendChild(t)}));const J=[],z=new Set(["/robots.txt","/live_chat","/live_chat_replay"]);let Y=window.onerror,X=z.has(location.pathname)?2:1;var Z;JSON&&"parse"in JSON||(X=0),1===X&&(()=>{let e=Y,t=null;Object.defineProperty(Object.prototype,"matchAll",{get(){return t=this,!0},enumerable:!0,configurable:!0});try{JSON.parse("{}")}catch(e){console.warn(e),X=0}delete Object.prototype.matchAll;let n=window.onerror;if(window.onerror=e,0!==X){if(t&&(JSON.parse.stackNeedleDetails=t,t.matchAll=!0),e===n)return X=0;X=t?3:4}})(),2===X&&(()=>{let e=Y,t=null,n=null;Object.defineProperty(Function.prototype,"findOwner",{get(){return t=this,this._findOwner},set(e){return this._findOwner=e,!0},enumerable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"matchAll",{get(){return n=this,!0},enumerable:!0,configurable:!0});try{JSON.parse("{}")}catch(e){console.warn(e),X=0}if(delete Function.prototype.findOwner,delete Object.prototype.matchAll,e!==window.onerror)return X=4;0!=X&&(J.push("fix_error_many_stack_state NB"),n&&(n.pattern=null,n.re=null,n.expect=null,n.matchAll=!0),t&&(t.findOwner=t.mustProcess=t.logJson=()=>{},delete t._findOwner),X=3,JSON.parse.stackNeedleDetails=n,JSON.parse.objectPrune=t)})(),3===X&&(()=>{let e=Y;try{JSON.parse("{}")}catch(e){console.warn(e),X=0}e!==window.onerror&&(window.onerror=e,0!==X&&(X=4))})(),4===X&&(J.push("fix_error_many_stack_state AB"),JSON.parseProxy=JSON.parse,JSON.parse=(Z=(Z=JSON.parse).bind(JSON),function(e,t){const n=window.onerror;let o;window.onerror=null;try{o=Z(...arguments)}catch(e){o=e}if(window.onerror=n,o instanceof Error)throw o;return o}));const Q=()=>{};let ee=!1;try{ee=window.document===window.top.document}catch(e){}let te=!0,ne=null;const oe=(e,t)=>{if(!e||"function"!=typeof e)return void console.warn("f is not a function",e);let n=e+"",o=0,i=-1,r=0;for(let e=0,t=n.length;e<t;e++){const t=n[e];t>="a"&&t<="z"||t>="A"&&t<="Z"?(i<e-1&&r++,i=e):o++}let a=`${e.length}.${o}.${r}`;return t?a===t:a},ie=(e,t,n)=>{let o=!1;for(const i of n)if(e[t].prototype instanceof e[i]){o=!0;break}if(!o)return(n=n.filter((n=>!(e[n].prototype instanceof e[t])))).push(t),n},re=e=>{let t=[],n=new Map;for(const[o,i]of Object.entries(e)){const r="function"==typeof i?i.prototype:0;if(r){let i=0;if("function"==typeof r.handleGlobalKeyUp&&7===r.handleGlobalKeyUp.length?i+=400:"function"==typeof r.handleGlobalKeyUp&&8===r.handleGlobalKeyUp.length?i+=300:"function"==typeof r.handleGlobalKeyUp&&(i+=200),"function"==typeof r.handleGlobalKeyUp&&0===r.handleGlobalKeyUp.length&&(i-=600),i<200)continue;"function"==typeof r.handleGlobalKeyDown&&8===r.handleGlobalKeyDown.length&&(i+=80),"function"==typeof r.handleGlobalKeyDown&&7===r.handleGlobalKeyDown.length&&(i+=30),"function"==typeof r.step&&1===r.step.length&&(i+=10),"function"==typeof r.step&&1!==r.step.length&&(i+=5),i+=280,"function"==typeof r.cueVideoByPlayerVars&&(i+=4),"function"==typeof r.loadVideoByPlayerVars&&(i+=4),"function"==typeof r.preloadVideoByPlayerVars&&(i+=4),"function"==typeof r.seekBy&&(i+=4),"function"==typeof r.seekTo&&(i+=4),"function"==typeof r.getStoryboardFormat&&(i+=4),"function"==typeof r.getDuration&&(i+=4),"function"==typeof r.loadModule&&(i+=4),"function"==typeof r.unloadModule&&(i+=4),"function"==typeof r.getOption&&(i+=4),"function"==typeof r.getOptions&&(i+=4),"function"==typeof r.setOption&&(i+=4),"function"==typeof r.addCueRange&&(i+=4),"function"==typeof r.getDebugText&&(i+=4),"function"==typeof r.getCurrentBroadcastId&&(i+=4),"function"==typeof r.setSizeStyle&&(i+=4),"function"==typeof r.showControls&&(i+=4),"function"==typeof r.hideControls&&(i+=4),"function"==typeof r.getVideoContentRect&&(i+=4),"function"==typeof r.toggleFullscreen&&(i+=4),"function"==typeof r.isFullscreen&&(i+=4),"function"==typeof r.cancelPlayback&&(i+=4),"function"==typeof r.getProgressState&&(i+=4),"function"==typeof r.isInline&&(i+=4),"function"==typeof r.setInline&&(i+=4),"function"==typeof r.toggleSubtitles&&(i+=4),"function"==typeof r.getPlayerSize&&(i+=4),"function"==typeof r.wakeUpControls&&(i+=4),"function"==typeof r.setCenterCrop&&(i+=4),"function"==typeof r.getLoopVideo&&(i+=4),"function"==typeof r.setLoopVideo&&(i+=4),i>0&&(t=ie(e,o,t)||t),i>0&&n.set(o,i)}}if(0!==t.length)return t=t.map((e=>[e,n.get(e)||0])),t.length>1&&t.sort(((e,t)=>t[1]-e[1])),t.length>2&&console.log("[QT]",t),t[0][0];console.warn("Key does not exist. [QT]")},ae=e=>{let t=[],n=new Map;for(const[o,i]of Object.entries(e)){const r="function"==typeof i?i.prototype:0;if(r){let i=0;if("function"==typeof r.handleGlobalKeyUp&&7===r.handleGlobalKeyUp.length?i+=400:"function"==typeof r.handleGlobalKeyUp&&8===r.handleGlobalKeyUp.length?i+=300:"function"==typeof r.handleGlobalKeyUp&&(i+=200),"function"==typeof r.handleGlobalKeyUp&&0===r.handleGlobalKeyUp.length&&(i+=600),i<200)continue;"function"==typeof r.handleGlobalKeyDown&&8===r.handleGlobalKeyDown.length&&(i+=80),"function"==typeof r.handleGlobalKeyDown&&7===r.handleGlobalKeyDown.length&&(i+=30),"function"==typeof r.step&&1===r.step.length&&(i+=10),"function"==typeof r.step&&1!==r.step.length&&(i+=5),i+=280,"function"==typeof r.cueVideoByPlayerVars&&(i-=4),"function"==typeof r.loadVideoByPlayerVars&&(i-=4),"function"==typeof r.preloadVideoByPlayerVars&&(i-=4),"function"==typeof r.seekBy&&(i-=4),"function"==typeof r.seekTo&&(i-=4),"function"==typeof r.getStoryboardFormat&&(i-=4),"function"==typeof r.getDuration&&(i-=4),"function"==typeof r.loadModule&&(i-=4),"function"==typeof r.unloadModule&&(i-=4),"function"==typeof r.getOption&&(i-=4),"function"==typeof r.getOptions&&(i-=4),"function"==typeof r.setOption&&(i-=4),"function"==typeof r.addCueRange&&(i-=4),"function"==typeof r.getDebugText&&(i-=4),"function"==typeof r.getCurrentBroadcastId&&(i-=4),"function"==typeof r.setSizeStyle&&(i-=4),"function"==typeof r.showControls&&(i-=4),"function"==typeof r.hideControls&&(i-=4),"function"==typeof r.getVideoContentRect&&(i-=4),"function"==typeof r.toggleFullscreen&&(i-=4),"function"==typeof r.isFullscreen&&(i-=4),"function"==typeof r.cancelPlayback&&(i-=4),"function"==typeof r.getProgressState&&(i-=4),"function"==typeof r.isInline&&(i-=4),"function"==typeof r.setInline&&(i-=4),"function"==typeof r.toggleSubtitles&&(i-=4),"function"==typeof r.getPlayerSize&&(i-=4),"function"==typeof r.wakeUpControls&&(i-=4),"function"==typeof r.setCenterCrop&&(i-=4),"function"==typeof r.getLoopVideo&&(i-=4),"function"==typeof r.setLoopVideo&&(i-=4),i>0&&(t=ie(e,o,t)||t),i>0&&n.set(o,i)}}if(0!==t.length)return t=t.map((e=>[e,n.get(e)||0])),t.length>1&&t.sort(((e,t)=>t[1]-e[1])),t.length>2&&console.log("[SV]",t),t[0][0];console.warn("Key does not exist. [SV]")},le=e=>{let t=[],n=new Map;for(const[o,i]of Object.entries(e)){const r="function"==typeof i?i.prototype:0;if(r){let i=0;if("function"==typeof r.handleGlobalKeyUp&&7===r.handleGlobalKeyUp.length?i+=400:"function"==typeof r.handleGlobalKeyUp&&8===r.handleGlobalKeyUp.length?i+=300:"function"==typeof r.handleGlobalKeyUp&&(i+=200),"function"==typeof r.handleGlobalKeyUp&&0===r.handleGlobalKeyUp.length&&(i-=600),"function"==typeof r.init&&0===r.init.length||(i-=300),i<200)continue;"function"==typeof r.handleGlobalKeyDown&&8===r.handleGlobalKeyDown.length&&(i+=80),"function"==typeof r.handleGlobalKeyDown&&7===r.handleGlobalKeyDown.length&&(i+=30),"function"==typeof r.step&&1===r.step.length&&(i+=10),"function"==typeof r.step&&1!==r.step.length&&(i+=5),i+=280,"function"==typeof r.cueVideoByPlayerVars&&(i-=4),"function"==typeof r.loadVideoByPlayerVars&&(i-=4),"function"==typeof r.preloadVideoByPlayerVars&&(i-=4),"function"==typeof r.seekBy&&(i-=4),"function"==typeof r.seekTo&&(i-=4),"function"==typeof r.getStoryboardFormat&&(i-=4),"function"==typeof r.getDuration&&(i-=4),"function"==typeof r.loadModule&&(i-=4),"function"==typeof r.unloadModule&&(i-=4),"function"==typeof r.getOption&&(i-=4),"function"==typeof r.getOptions&&(i-=4),"function"==typeof r.setOption&&(i-=4),"function"==typeof r.addCueRange&&(i-=4),"function"==typeof r.getDebugText&&(i-=4),"function"==typeof r.getCurrentBroadcastId&&(i-=4),"function"==typeof r.setSizeStyle&&(i-=4),"function"==typeof r.showControls&&(i-=4),"function"==typeof r.hideControls&&(i-=4),"function"==typeof r.getVideoContentRect&&(i-=4),"function"==typeof r.toggleFullscreen&&(i-=4),"function"==typeof r.isFullscreen&&(i-=4),"function"==typeof r.cancelPlayback&&(i-=4),"function"==typeof r.getProgressState&&(i-=4),"function"==typeof r.isInline&&(i-=4),"function"==typeof r.setInline&&(i-=4),"function"==typeof r.toggleSubtitles&&(i-=4),"function"==typeof r.getPlayerSize&&(i-=4),"function"==typeof r.wakeUpControls&&(i-=4),"function"==typeof r.setCenterCrop&&(i-=4),"function"==typeof r.getLoopVideo&&(i-=4),"function"==typeof r.setLoopVideo&&(i-=4),i>0&&(t=ie(e,o,t)||t),i>0&&n.set(o,i)}}if(0!==t.length)return t=t.map((e=>[e,n.get(e)||0])),t.length>1&&t.sort(((e,t)=>t[1]-e[1])),t.length>2&&console.log("[DX]",t),t[0][0];console.warn("Key does not exist. [DX]")},se=window===top;let ce=null,de=0;se&&(()=>{ce="";const e=()=>{ce="",de=0};document.addEventListener("yt-navigate-start",e,!1),document.addEventListener("yt-navigate-cache",e,!1),document.addEventListener("yt-page-data-fetched",e,!1),document.addEventListener("yt-navigate-finish",(()=>{de=1;try{const e=new URL(location.href);ce=e&&b(e)&&e.searchParams.get("v")||""}catch(e){ce=""}}),!1)})();let ue=null;se&&(()=>{let e=!0;ue={get videoId(){if(e){e=!1;let t=document.querySelectorAll("ytd-watch-flexy[video-id]");const n=[];for(const e of t)e.closest("[hidden]")||n.push(e);1!==n.length?this.__videoId__="":this.__videoId__=n[0].getAttribute("video-id")}return this.__videoId__||""}};const t=t=>{(t||0).target instanceof HTMLVideoElement&&(e=!0)};document.addEventListener("loadedmetadata",t,!0),document.addEventListener("durationchange",t,!0)})();const pe=new d((e=>{if("undefined"!=typeof AbortSignal){let t=()=>{t&&(t=null,e(document.querySelector("ytd-app")))};document.addEventListener("yt-action",t,{capture:!0,passive:!0,once:!0})}else{let t=()=>{t&&(document.removeEventListener("yt-action",t,!0),t=null,e(document.querySelector("ytd-app")))};document.addEventListener("yt-action",t,!0)}}));if((async e=>{const t=requestAnimationFrame;try{let n=16;const o="vanillajs-iframe-v1";let i=document.getElementById(o),r=null;if(!i){i=document.createElement("iframe"),i.id=o;const a="function"==typeof webkitCancelAnimationFrame&&"undefined"==typeof kagi?i.src=URL.createObjectURL(new Blob([],{type:"text/html"})):null;i.sandbox="allow-same-origin";let l=document.createElement("noscript");for(l.appendChild(i);!document.documentElement&&n-- >0;)await new d(t);document.documentElement.appendChild(l),a&&d.resolve().then((()=>URL.revokeObjectURL(a))),r=t=>{const n=o=>{o&&e.removeEventListener("DOMContentLoaded",n,!1),o=l,l=e=r=0,t?t((()=>o.remove()),200):o.remove()};t&&"loading"===document.readyState?e.addEventListener("DOMContentLoaded",n,!1):n()}}for(;!i.contentWindow&&n-- >0;)await new d(t);const a=i.contentWindow;if(!a)throw"window is not found.";try{const{requestAnimationFrame:t,setTimeout:n,clearTimeout:o,cancelAnimationFrame:i,setInterval:l,clearInterval:s,requestIdleCallback:c,getComputedStyle:u}=a,p={requestAnimationFrame:t,setTimeout:n,clearTimeout:o,cancelAnimationFrame:i,setInterval:l,clearInterval:s,requestIdleCallback:c,getComputedStyle:u};for(let t in p)p[t]=p[t].bind(e);return r&&d.resolve(p.setTimeout).then(r),p.animate=a.HTMLElement.prototype.animate,p.perfNow=a.performance.now,p}catch(e){return r&&r(),null}}catch(e){return console.warn(e),null}})(window).then((o=>{if(!o)return null;const{requestAnimationFrame:i,setTimeout:r,clearTimeout:a,cancelAnimationFrame:c,setInterval:f,clearInterval:g,animate:_,requestIdleCallback:b,getComputedStyle:w,perfNow:v}=o;performance.now17=v.bind(performance),y=i;const S=(()=>{try{const e=document.createElement("canvas");return!(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}})(),E=(()=>{if(S)return null;const e=Object.getOwnPropertyDescriptor(Document.prototype,"visibilityState");if(!e||"function"!=typeof e.get)return null;const t=e.get;let n=null,o="hidden"===t.call(document);return pureAddEventListener.call(document,"visibilitychange",(e=>{const i="hidden"===t.call(document);o!==i&&(o=i,!o&&n&&(n=n.resolve()))})),()=>{if(n)return n;const e=(!o&&r((()=>{o||n!==e||(n=n.resolve())})),n=new u);return e}})();let O=null;const I=()=>O||(O=new d((e=>{i((t=>{O=null,e(t)}))}))),T=E||I,R=new e;window.__native__getComputedStyle__||window.__jst__getComputedStyle__||"function"!=typeof window.getComputedStyle||1!==window.getComputedStyle.length||(window.__native__getComputedStyle__=w,window.__original__getComputedStyle__=window.getComputedStyle,window.getComputedStyle=function(e){if(!(e instanceof Element)||2===arguments.length&&arguments[1]||arguments.length>2)return window.__original__getComputedStyle__(...arguments);let t=R.get(e);return t||(t=window.__native__getComputedStyle__(e),R.set(e,t)),t},window.__jst__getComputedStyle__=window.getComputedStyle),pe.then((()=>{"function"==typeof window.__jst__getComputedStyle__&&1===window.__jst__getComputedStyle__.length&&window.__jst__getComputedStyle__!==window.getComputedStyle&&(window.getComputedStyle=window.__jst__getComputedStyle__)}));const j=location.href.includes(".youtube.com/embed/"),M="undefined"!=typeof AbortSignal,L=new d((e=>{!j&&M&&document.addEventListener("yt-action",(function(){r(e,480)}),{capture:!0,passive:!0,once:!0}),!j&&M&&"object"==typeof customElements&&C("ytd-app").then((()=>{r(e,1200)})),r(e,3e3)})),x=new d((e=>{!j&&M&&document.addEventListener("yt-action",(function(){r(e,450)}),{capture:!0,passive:!0,once:!0}),!j&&M&&"object"==typeof customElements&&C("ytd-app").then((()=>{r(e,900)})),r(e,1800)}));te||x.then((()=>{te=!0,ne=null})),(async()=>{const e=await new d((e=>{C("ytd-app").then((()=>{const t=document.querySelector("ytd-app");if(t)return void e(t);let n=new MutationObserver((()=>{const t=document.querySelector("ytd-app");t&&(n&&(n.disconnect(),n.takeRecords(),n=null),e(t))}));n.observe(document,{subtree:!0,childList:!0})}))}));if(!e)return;const t=m(e).constructor.prototype;if(!t)return;let n=0;const o=e=>{const t=m(e);t&&"function"==typeof t.onYtActionBoundListener_&&!t.onYtActionBoundListener57_&&(t.onYtActionBoundListener57_=t.onYtActionBoundListener_,t.onYtActionBoundListener_=t.onYtAction_.bind(t),n++)};U((()=>{if("function"!=typeof t.created||t.created56||(t.created56=t.created,t.created=function(...e){const t=this.created56(...e);return o(this),t},n++),"function"!=typeof t.onYtAction_||t.onYtAction57_||(t.onYtAction57_=t.onYtAction_,t.onYtAction_=function(...e){d.resolve().then((()=>this.onYtAction57_(...e)))},n++),e&&o(e),n>=3)return 1}),new d((e=>r(e,1e3)))).obtain()})();const U=(e,t)=>{let n=null;return{obtain:()=>(n||(n=new d((n=>{let o=null;const i=()=>{let t=e();t&&(o.disconnect(),o.takeRecords(),o=null,n(t))};o=new MutationObserver(i),o.observe(document,{subtree:!0,childList:!0}),i(),t&&t.then((()=>{n(null)}))}))),n)}},F=U((()=>(window||0)._yt_player||0),L),N=U((()=>{const e=window.Polymer;if("function"==typeof e&&(e.Base||0).connectedCallback&&(e.Base||0).disconnectedCallback)return e}),L),K=U((()=>((window||0).ytglobal||0).schedulerInstanceInstance_||0),L),G=U((()=>{let e=(document||0).timeline||0;if(e&&"function"==typeof e._play)return e}),L),B=U((()=>{let e=(window||0).Animation||0;if(e&&"function"==typeof e&&2===e.length&&"function"==typeof e.prototype._updatePromises)return e}),L),$=async(e,t,n)=>{const o=`${e}`,i=`${t}`,r=!!n,a=await F.obtain();if(!a||"object"!=typeof a)return;const l=(e=>{let t=[];for(const[n,r]of Object.entries(e)){const a="function"==typeof r?r.prototype:0;a&&"function"==typeof a[o]&&a[o].length>=0&&!a[i]&&(t=ie(e,n,t)||t)}if(0!==t.length)return t;console.warn(`Key prop [${o}] does not exist.`)})(a);if(!l)return;r&&console.log(`FIX_${o}`,l);const s=function(...e){d.resolve().then((()=>this[i](...e)))};for(const e of l){const t=a[e].prototype;r&&console.log(237,e,t),"function"!=typeof t[o]||t[i]||(t[i]=t[o],t[o]=s)}};$("onStateChange","onStateChange57"),$("onLoopRangeChange","onLoopRangeChange57");{const e=0;$("onVideoProgress","onVideoProgress57",e),$("onFullscreenChange","onFullscreenChange57",e)}(async()=>{const e=await N.obtain();if(e){{const t=e=>e&&e.writable&&e.enumerable&&e.configurable&&"function"==typeof e.value,n=e=>e&&"function"==typeof e.value,o=((e.dom(document.createElement("null"))||0).constructor||0).prototype||0,i=(Object.getOwnPropertyDescriptor(o,"getOwnerRoot"),Object.getOwnPropertyDescriptor(Node.prototype,"parentElement"),Object.getOwnPropertyDescriptor(o,"querySelector")),r=Object.getOwnPropertyDescriptor(Element.prototype,"querySelector"),a=Object.getOwnPropertyDescriptor(Document.prototype,"querySelector"),l=Object.getOwnPropertyDescriptor(o,"querySelectorAll"),s=Object.getOwnPropertyDescriptor(Element.prototype,"querySelectorAll"),c=Object.getOwnPropertyDescriptor(Document.prototype,"querySelectorAll");if((!i||t(i))&&n(r)&&n(a)&&!("querySelector15"in o)){o.querySelector15=o.querySelector;const t=function(e){try{const t=this.node;if(t instanceof Document&&!0===t.isConnected)return a.value.call(t,e)}catch(e){}return this.querySelector15(e)};Object.defineProperty(o,"querySelector",{get:()=>t,set(e){return e===t||(this.querySelector15=e),!0},enumerable:!1,configurable:!0}),e.__fixedQuerySelector__=1}if((!l||t(l))&&n(s)&&n(c)&&!("querySelectorAll15"in o)){o.querySelectorAll15=o.querySelectorAll;const t=function(e){try{const t=this.node;if(t instanceof Document&&!0===t.isConnected)return c.value.call(t,e)}catch(e){}return this.querySelectorAll15(e)};Object.defineProperty(o,"querySelectorAll",{get:()=>t,set(e){return e===t||(this.querySelectorAll15=e),!0},enumerable:!1,configurable:!0}),e.__fixedQuerySelectorAll__=1}}n;{e.Base.__connInit__=function(){q(this)};const t=function(...e){!this.mh35&&"function"==typeof this.__connInit__&&this.__connInit__();const t=this[D](...e);return!this.mh35&&"function"==typeof this.__connInit__&&this.__connInit__(),this.mh35=1,t};t.m353=1;const n=e.Base.connectedCallback;e.Base[D]=V.get(n)||n,e.Base.connectedCallback=t;const o=function(...e){!this.mh36&&"function"==typeof this.__connInit__&&this.__connInit__();const t=this[A](...e);return!this.mh36&&"function"==typeof this.__connInit__&&this.__connInit__(),this.mh36=1,t};o.m353=1,e.Base[A]=e.Base.created,e.Base.created=o}}})(),!Node.prototype.appendChild73&&Node.prototype.appendChild&&(()=>{const e=Node.prototype.appendChild73=Node.prototype.appendChild;e&&(Node.prototype.appendChild=function(t){if(this instanceof Element)try{HTMLVideoElement;{let e=t instanceof DocumentFragment;if(te||document.head!==this)e&&this.nodeName.startsWith("YT-")&&(e=!1);else{null===ne&&(ne=document.head.getElementsByTagName("LINK"));for(const e of ne)"preload"===e.rel&&"fetch"===e.as&&(e.rel="prefetch")}if(e&&null===t.firstElementChild){let e=!1;for(let n=t.firstChild;n instanceof Node;n=n.nextSibling)if(3===n.nodeType){e=!0;break}if(!e)return t}}}catch(e){console.log(e)}return 1===arguments.length?e.call(this,t):e.apply(this,arguments)})})(),U((()=>{const{ShadyDOM:e,ShadyCSS:t}=window;if(e&&(e.handlesDynamicScoping=!1,e.noPatch=!0,e.patchOnDemand=!1,e.preferPerformance=!0,e.querySelectorImplementation=void 0),t&&(t.nativeCss=!0,t.nativeShadow=!0,t.cssBuild=void 0,t.disableRuntime=!0),e&&t)return 1}),L).obtain(),(async()=>{const e=await K.obtain();if(!e)return;if(!("function"!=typeof e.start||e.start993||e.stop||e.cancel||e.terminate||e.interupt)){e.start993=e.start;let t=null,n=null;const o=function(){return t=this.fn,n=[...arguments],12373},a=[o.bind({fn:i}),o.bind({fn:f}),o.bind({fn:r}),o.bind({fn:b})];let s=0,c=null;const u=new Array(4),p={get:(e,t,n)=>"$$12377$$"===t||("$$12378$$"===t?e:e[t]),set(e,o,a,p){if(a>=1&&a<=4&&(c=o),12373===a&&c){const a=e[c],p=o;if(3===a&&t===i)e[p]=h.apply(window,n);else if(2===a&&t===r)e[p]=u[2].apply(window,n);else if(4!==a||t!==r||n[1])1!==a||t!==b&&t!==r?(e[c]=0,e[p]=0):e[p]=t===b?b.apply(window,n):u[2].apply(window,n);else if("function"==typeof l){const t=n[0],o=++s;l((()=>{e[p]===-o&&t()})),e[c]=940,e[p]=-o}else{const t=n[0],o=++s;d.resolve().then((()=>{e[p]===-o&&t()})),e[c]=930,e[p]=-o}}else e[o]=a;return!0}};let y=!1;e.start=function(){if(!y){y=!0;try{u[0]=window.requestAnimationFrame,u[1]=window.setInterval,u[2]=window.setTimeout,u[3]=window.requestIdleCallback;const e=this.$$12378$$||this;window.requestAnimationFrame=a[0],window.setInterval=a[1],window.setTimeout=a[2],window.requestIdleCallback=a[3],c=null,e.start993.call(new Proxy(e,p)),c=null,window.requestAnimationFrame=u[0],window.setInterval=u[1],window.setTimeout=u[2],window.requestIdleCallback=u[3]}catch(e){console.warn(e)}y=!1}},e.start.toString=e.start993.toString.bind(e.start993)}})(),(async()=>{const n=await F.obtain();if(!n||"object"!=typeof n)return;let o=(e=>{const t="ZqOu";let n=[];for(const[t,o]of Object.entries(e)){const i="function"==typeof o?o.prototype:0;!i||"function"!=typeof i.start||0!==i.start.length||"function"!=typeof i.isActive||0!==i.isActive.length||"function"!=typeof i.stop||0!==i.stop.length||i.isComplete||i.getStatus||i.getResponseHeader||i.getLastError||i.send||i.abort||i.sample||i.initialize||i.fail||i.getName||(n=ie(e,t,n)||n)}if(0!==n.length)return console.log(`[${t}]`,n),n[0];console.warn(`Key does not exist. [${t}]`)})(n);if(!o)return;const i=n;let r=o;const a=i[r];if("function"!=typeof a)return;const l=a.prototype;let c=new a,u=()=>{},f={},y="",h="",m="",g="";for(const[e,t]of Object.entries(c))t instanceof Window&&(h=e);const _={get(e,n){let o=e[n];o instanceof Window&&!h&&(h=t);let i="function"==typeof o?u:"object"==typeof o?f:o;return n===h&&(i={requestAnimationFrame:e=>3,cancelAnimationFrame(){}}),m||"function"!=typeof o||n in e.constructor.prototype||(m=n),i},set:(e,t,n)=>("boolean"!=typeof n||y||(y=t),"number"==typeof n&&!g&&n>=2&&(g=t),e[t]=n,!0)};c.start.call(new Proxy(c,_)),l._activation=!1,l.start=function(){this._activation||(this._activation=!0,T().then((()=>{this._activation=!1,this[g]&&d.resolve().then(this[m])}))),this[g]=1,this[y]=!0},l.stop=function(){this[g]=null};const b=(e=>{let t=[];for(const[n,o]of Object.entries(e))"function"==typeof o&&3===o.length&&n.length<3&&(o+"").includes("a.style[b]=c")&&t.push(n);if(0!==t.length)return console.log("[zo]",t),t[0];console.warn("Key does not exist. [zo]")})(n);if(b){r=b;const t=i[r];i["$$original$$"+r]=t;const n=async(e,t)=>{let n="",o=0,i="",r=0;const a=e.style;if(t.length<9);else if(t.startsWith("scalex(0.")||"scalex(0)"===t||"scalex(1)"===t){let e=t.substring(7,t.length-1),a=e.length>=1?parseFloat(e):-1;a>-1e-5&&a<1.00001&&(n="scaleX",o=a,i="",r=1)}else if(t.startsWith("translateX(")&&t.endsWith("px)")){let e=t.substring(11,t.length-3),a=e.length>=1?parseFloat(e):NaN;if("number"!=typeof a||isNaN(a)){if("NaN"===e)return}else n="translateX",o=a,i="px",r=2}else if(t.startsWith("scaley(0.")||"scaley(0)"===t||"scaley(1)"===t){let e=t.substring(7,t.length-1),a=e.length>=1?parseFloat(e):-1;a>-1e-5&&a<1.00001&&(n="scaleY",o=a,i="",r=1)}else if(t.startsWith("translateY(")&&t.endsWith("px)")){let e=t.substring(11,t.length-3),a=e.length>=1?parseFloat(e):NaN;if("number"!=typeof a||isNaN(a)){if("NaN"===e)return}else n="translateY",o=a,i="px",r=2}else if(t.startsWith("scalex(")&&t.includes("e-")){let e=t.substring(7,t.length-1),a=e.length>=1?parseFloat(e):-1;a>-1e-5&&a<1e-5&&(n="scaleX",o=0,i="",r=1)}else if(t.startsWith("scaley(")&&t.includes("e-")){let e=t.substring(7,t.length-1),a=e.length>=1?parseFloat(e):-1;a>-1e-5&&a<1e-5&&(n="scaleY",o=0,i="",r=1)}if(1===r){const e=Math.round(200*o)/200;if((t=`${n}(${p(e,3)})`)===a.transform)return;a.transform=t}else if(2===r){if((t=`${n}(${p(o,1)}${i})`)===a.transform)return;a.transform=t}else{const e=a.transform;if(!t&&!e)return;if(t===e)return;a.transform=t}},o=new e,a={display:new e,width:new e,height:new e,outlineWidth:new e,position:new e,padding:new e,cssText:new e,right:new e,left:new e,top:new e,bottom:new e,transitionDelay:new e,marginLeft:new e,marginTop:new e,marginRight:new e,marginBottom:new e},l=Symbol(),c=(e,t,n,o,i)=>{const r=e,a=n,c=!a.has(r);i||c?(a.set(r,l),o(r,t),c&&s((()=>{const e=a.get(r);void 0!==e&&(a.delete(r),e!==l&&o(r,e))}))):a.set(r,t)},d=new Set,u=function(e,i,r,l=!1){if("number"==typeof r&&"string"==typeof i&&e instanceof HTMLElement){const e=r;(r=`${e}`).length>5&&(r=p(e,e<10&&e>-10?3:1))}if("string"==typeof i&&"string"==typeof r&&e instanceof HTMLElement){let u=null;if("transform"===i)return void c(e,r,o,n,l);if(u=a[i]){const t=i;return void c(e,r,u,((e,n)=>{const o=e.style,i=o[t];(i||n)&&i!==n&&(o[t]=n)}),l)}if("outline-width"===i){const t="outlineWidth";return u=a[t],void c(e,r,u,((e,n)=>{const o=e.style,i=o[t];(i||n)&&i!==n&&(o[t]=n)}),l)}if("maxWidth"===i||"maxHeight"===i){const t=i,n=e.style,o=n[t];if(!o&&!r)return;if(o===r)return;return void(n[t]=r)}return d.has(i)||(d.add(i),s((()=>{e.classList.contains("caption-window")||e.classList.contains("ytp-caption-segment")||console.log(27304,e,i,r)}))),void t.call(this,e,i,r)}if("object"!=typeof(i||0))return console.log(27306,e,i,r),void t.call(this,e,i,r);{const t=(e.id||0).length>14;for(const[n,o]of Object.entries(i))u.call(this,e,n,o,t)}};i[r]=u}const w=(e=>{let t=[];for(const[n,o]of Object.entries(e)){const i="function"==typeof o?o.prototype:0;i&&"function"==typeof i.createElement&&2===i.createElement.length&&"function"==typeof i.detach&&0===i.detach.length&&"function"==typeof i.update&&1===i.update.length&&"function"==typeof i.updateValue&&2===i.updateValue.length&&(t=ie(e,n,t)||t)}if(0!==t.length)return console.log("[uG]",t),t[0];console.warn("Key does not exist. [uG]")})(n);if(w){r=w;const t=i[r].prototype,n=new Map;"function"!=typeof t.updateValue||2!==t.updateValue.length||t.updateValue31||(t.updateValue31=t.updateValue,t.updateValue=function(t,o){if("string"!=typeof t)return this.updateValue31(t,o);const i=this.element;if(!(i instanceof HTMLElement))return this.updateValue31(t,o);let r=n.get(t);r||n.set(t,r=new e);let a=r.get(i);return a&&a.value===o?void 0:(a?(this.__oldValueByUpdateValue__=a.value,a.value=o):(this.__oldValueByUpdateValue__=null,r.set(i,a={value:o})),this.updateValue31(t,o))})}})(),(async()=>{const e=await F.obtain();e&&"object"==typeof e&&k(e)})(),(async()=>{const e=await F.obtain();if(!e||"object"!=typeof e)return;let t=(e=>{const t="ZqQu";let n=[];for(const[t,o]of Object.entries(e)){const i="function"==typeof o?o.prototype:0;!i||"function"!=typeof i.start||1!==i.start.length||"function"!=typeof i.isActive||0!==i.isActive.length||"function"!=typeof i.stop||0!==i.stop.length||i.isComplete||i.getStatus||i.getResponseHeader||i.getLastError||i.send||i.abort||i.sample||i.initialize||i.fail||i.getName||(n=ie(e,t,n)||n)}if(0!==n.length)return console.log(`[${t}]`,n),n[0];console.warn(`Key does not exist. [${t}]`)})(e);if(!t)return;const n=e[t];if("function"!=typeof n)return;const o=n.prototype,i=(()=>{let e="";try{o.stop.call(new Proxy({isActive:()=>{}},{set:(t,n,o)=>(0===o&&(e=n),!0)}))}catch(e){}if(!e)return;const t=e;let n="",i="";try{o.start.call(new Proxy({stop:()=>{},[t]:0},{get:(e,t)=>t in e?e[t]:n?void(i||(i=t)):(n=t,null)}))}catch(e){n&&i||console.log(e)}if(!n||!i)return;let r="",a="",l="",s="";const c=new Set;for(const[e,s]of Object.entries(o))if("stop"!==e&&"start"!==e&&"isActive"!==e&&"constructor"!==e&&e!==t&&e!==n&&e!==i&&"function"==typeof s){const t=/this\.(\w+)\.call\(this\.(\w+)\)/.exec(s+"");t?(r=e,a=t[1],l=t[2]):c.add(e)}if(r&&a&&l){for(const e of c){if(e===r||e===a||e===l)continue;const t=o[e];"function"==typeof t&&(t+"").includes(`this.stop();delete this.${a};delete this.${l}`)&&(s=e)}return[t,n,i,r,a,l,s]}})();if(!i||!i.length)return;const[r,a,l,s,c,d,u]=i;if(!(r&&a&&l&&s&&c&&d&&u))return;let p=null;o[u]=function(){p||(p=Object.getOwnPropertyNames(this).filter((e=>{if(e!=r&&e!=a&&e!=l&&e!=s&&e!=c&&e!=d&&e!=u){const t=typeof this[e];return"undefined"===t||"object"===t}return!1})));for(const e of p){const t=this[e];(t||0).length>=1&&(t.length=0)}this[r]>0&&this.stop(),this[c]=null,this[d]=null},o.start=function(e){this[r]>0&&this.stop();const t=void 0!==e?e:this[l];this[r]=window.setTimeout(this[a],t)},o.stop=function(){this[r]>0&&(window.clearTimeout(this[r]),this[r]=0)},o.isActive=function(){return this[r]>0},o[s]=function(){this.stop();const e=this[c],t=this[d];let n=!1;e||(n=!0),n||e.call(t)}})(),(async()=>{const[e,t]=await d.all([G.obtain(),B.obtain()]);if(!e||!t)return;const n=t.prototype,o=(e=>{try{return e.__proto__}catch(e){}return null})(e);if(o&&"function"==typeof o.getAnimations&&"function"==typeof o.play&&"function"==typeof o._discardAnimations&&"function"==typeof o._play&&"function"==typeof o._updateAnimationsPromises&&!o.nofCQ&&"function"==typeof n._updatePromises&&!n.nofYH){o.nofCQ=1,n.nofYH=1;const i=(e=>{const t=Array.prototype.filter;let n=null;if(Array.prototype.filter=function(){return n=this,this},e.call({}),Array.prototype.filter=t,n&&"number"==typeof n.length){return n}return null})(o._updateAnimationsPromises);if(!i||"number"!=typeof i.length)return;n._updatePromises31=n._updatePromises,n._updatePromises=function(){var e=this._oldPlayState,t=this.playState;return t!==e&&(this._oldPlayState=t,this._readyPromise&&("idle"==t?(this._rejectReadyPromise(),this._readyPromise=void 0):"pending"==e?this._resolveReadyPromise():"pending"==t&&(this._readyPromise=void 0)),this._finishedPromise&&("idle"==t?(this._rejectFinishedPromise(),this._finishedPromise=void 0):"finished"==t?this._resolveFinishedPromise():"finished"==e&&(this._finishedPromise=void 0))),this._readyPromise||this._finishedPromise};let r=!1;const a=()=>{const t=n=>{var o=e;o.currentTime=n,o._discardAnimations(),0==o._animations.length?r=!1:I().then(t)};return{restartWebAnimationsNextTick:()=>{r||(r=!0,I().then(t))}}},l=()=>{const t=document.createElement("a-f");if(t.id="a-f",!document.getElementById("afscript")){const e=document.createElement("style");e.id="afscript",e.textContent="\n              @keyFrames aF1 {\n                0% {\n                  order: 0;\n                }\n                100% {\n                  order: 1;\n                }\n              }\n              #a-f[id] {\n                visibility: collapse !important;\n                position: fixed !important;\n                display: block !important;\n                top: -100px !important;\n                left: -100px !important;\n                margin:0 !important;\n                padding:0 !important;\n                outline:0 !important;\n                border:0 !important;\n                z-index:-1 !important;\n                width: 0px !important;\n                height: 0px !important;\n                contain: strict !important;\n                pointer-events: none !important;\n                animation: 1ms steps(2, jump-none) 0ms infinite alternate forwards running aF1 !important;\n              }\n            ",(document.head||document.documentElement).appendChild(e)}document.documentElement.insertBefore(t,document.documentElement.firstChild);const n=function(o){const i=o.timeStamp;var a=e;a.currentTime=i,a._discardAnimations(),0==a._animations.length?(r=!1,t.onanimationiteration=null):t.onanimationiteration=n};return{restartWebAnimationsNextTick:()=>{r||(r=!0,t.onanimationiteration=n)}}},{restartWebAnimationsNextTick:s}="onanimationiteration"in document.documentElement?l():a();o._play=function(e){return e=new t(e,this),this._animations.push(e),s(),e._updatePromises(),e._animation.play(),e._updatePromises(),e};const c=new Set(i);i.length=0,i.push=null,i.splice=null,i.slice=null,i.indexOf=null,i.unshift=null,i.shift=null,i.pop=null,i.filter=null,i.forEach=null,i.map=null;const u=()=>{c.forEach((e=>{e._updatePromises()||c.delete(e)}))};o._updateAnimationsPromises31=o._updateAnimationsPromises,o._updateAnimationsPromises=u,delete o._updateAnimationsPromises,Object.defineProperty(o,"_updateAnimationsPromises",{get:()=>0===c.size?Q:u,set(e){delete this._updateAnimationsPromises,this._updateAnimationsPromises=e},enumerable:!0,configurable:!0});let p=Object.getOwnPropertyDescriptor(n,"finished");n.__finished_native_get__=p.get,"function"!=typeof p.get||p.set||!0!==p.configurable||!0!==p.enumerable||Object.defineProperty(n,"finished",{get(){return this._finishedPromise||(!c.has(this)&&c.add(this),this._finishedPromise=new d(((e,t)=>{this._resolveFinishedPromise=function(){e(this)},this._rejectFinishedPromise=function(){t({type:DOMException.ABORT_ERR,name:"AbortError"})}})),"finished"==this.playState&&this._resolveFinishedPromise()),this._finishedPromise},set:void 0,enumerable:!0,configurable:!0});let f=Object.getOwnPropertyDescriptor(n,"ready");if(n.__ready_native_get__=f.get,"function"!=typeof f.get||f.set||!0!==f.configurable||!0!==f.enumerable||Object.defineProperty(n,"ready",{get(){return this._readyPromise||(!c.has(this)&&c.add(this),this._readyPromise=new d(((e,t)=>{this._resolveReadyPromise=function(){e(this)},this._rejectReadyPromise=function(){t({type:DOMException.ABORT_ERR,name:"AbortError"})}})),"pending"!==this.playState&&this._resolveReadyPromise()),this._readyPromise},set:void 0,enumerable:!0,configurable:!0}),"function"==typeof n._rebuildUnderlyingAnimation&&!n._rebuildUnderlyingAnimation21&&0===n._rebuildUnderlyingAnimation.length){n._rebuildUnderlyingAnimation21=n._rebuildUnderlyingAnimation;const e=function(){return this.effect&&this.effect._onsample&&(this.effect._onsample=null),this._rebuildUnderlyingAnimation21()};n._rebuildUnderlyingAnimation=e}}})(),!j&&d.resolve().then((()=>{class e extends Set{constructor(e){super(),this.limit=e}add(e){if(!super.has(e)){super.add(e);let t=super.size-this.limit;if(t>0){const e=super.values();do{const t=e.next().value;super.delete(t)}while(--t>0)}}}removeAdd(e){super.delete(e),this.add(e)}}const t=new e(8),n=new e(8);let o="",l=0,s="",c="",u=0,p=0,f="",y="",h="",g="";function _(e){if(t.length>0){for(const[e,o]of t)n.removeAdd(e);e&&t.clear()}}const b=se&&P;b&&C("ytd-video-primary-info-renderer").then((()=>{let e,i;if(e=document.createElement("ytd-video-primary-info-renderer"),e instanceof Element){if(i=m(e).constructor.prototype,i.__getEmittorTaskMgr859__=function(){let e=null;try{e=(this.ytTaskEmitterBehavior||0).getTaskManager()||null}catch(e){}return e},"function"==typeof i.fetchUpdatedMetadata&&1===i.fetchUpdatedMetadata.length&&!i.fetchUpdatedMetadata717){let e;i.fetchUpdatedMetadata717=i.fetchUpdatedMetadata,i.fetchUpdatedMetadata718=function(e){let t=!1;if(!e||"string"!=typeof e||!s||s!==f||e!==f||ce&&ce===y?("string"!=typeof e||p>3||!f||f===e&&f!==c||c&&c!==e)&&(t=!0):ce||ue.videoId!==y||(t=!0),u&&(a(u),u=0),t)return this.fetchUpdatedMetadata717(e);let n=c===e?8e3:800;u=r((()=>{this.fetchUpdatedMetadata717(e)}),n),console.log("[yt-js-engine-tamer]","5190 delayed fetchUpdatedMetadata",n)},i.fetchUpdatedMetadata=function(i){if(!de)return e&&a(e),void(e=r((()=>{this.fetchUpdatedMetadata718(i)}),300));try{if(p++,(arguments.length>1||!(void 0===i||"string"==typeof i&&i))&&console.warn("CAUTION: fetchUpdatedMetadata coding might have to be updated."),"string"==typeof i&&n.has(i))return void console.log("[yt-js-engine-tamer]","5040 skip fetchUpdatedMetadata",i);if(!i&&(this.data||0).updatedMetadataEndpoint)s&&c!==s&&(c=s),o="",l=0,_(!0);else if("string"==typeof i){const e=ue.videoId;let n=!!ce;if(f!==i||y!==e||!y||!e||ce&&ce!==e){if(f===i&&y!==ce)return}else n=!0;n&&(h=i,g=ce||e),t.has(i)||t.add(i)}return this.fetchUpdatedMetadata718(i)}catch(e){console.log("Code Error in fetchUpdatedMetadata",e)}return this.fetchUpdatedMetadata717(i)}}if("function"==typeof i.scheduleInitialUpdatedMetadataRequest&&0===i.scheduleInitialUpdatedMetadataRequest.length&&!i.scheduleInitialUpdatedMetadataRequest717){i.scheduleInitialUpdatedMetadataRequest717=i.scheduleInitialUpdatedMetadataRequest;let e=null;i.scheduleInitialUpdatedMetadataRequest=function(){try{arguments.length>0&&console.warn("CAUTION: scheduleInitialUpdatedMetadataRequest coding might have to be updated."),o="",l=0,u&&(a(u),u=0),p=0,_(!0);const t=this.__getEmittorTaskMgr859__();if(t&&!t.addJob714&&t.addJob&&t.cancelJob&&function(e){const t=e.constructor.prototype;t&&"function"==typeof t.addJob&&3===t.addJob.length&&"function"==typeof t.cancelJob&&1===t.cancelJob.length&&(t.addJob714||(t.addJob714=t.addJob,t.addJob=function(e,t,n){const o=this.addJob714(e,t,n);return o>0&&(this.__lastJobId863__=o),o}),t.cancelJob714||(t.cancelJob714=t.cancelJob,t.cancelJob=function(e){return this.cancelJob714(e)}))}(t),t&&!t.addJob714&&console.log("[yt-js-engine-tamer]","scheduleInitialUpdatedMetadataRequest error 507"),t&&"function"==typeof t.addLowPriorityJob&&2===t.addLowPriorityJob.length&&"function"==typeof t.cancelJob&&1===t.cancelJob.length){let n;if(e){const n=e;e=null,console.log("cancelJob",n),t.cancelJob(n)}let o=t.__lastJobId863__;try{n=this.scheduleInitialUpdatedMetadataRequest717()}catch(e){}let i=t.__lastJobId863__;return o!==i&&(e=i),n}console.log("[yt-js-engine-tamer]","scheduleInitialUpdatedMetadataRequest error 601")}catch(e){console.log("Code Error in scheduleInitialUpdatedMetadataRequest",e)}return this.scheduleInitialUpdatedMetadataRequest717()}}}})),b&&pe.then((e=>{let i,r;if(i=e,i instanceof Element){if(r=m(i).constructor.prototype,"function"==typeof r.sendServiceAjax_&&4===r.sendServiceAjax_.length&&!r.sendServiceAjax717_){function p(e,t,n){let o=(e||0).is,i=((t||0).updatedMetadataEndpoint||0).videoId,r=(n||0).continuation;return"string"!=typeof o&&(o=null),"string"!=typeof i&&(i=null),"string"!=typeof r&&(r=null),{is:o,videoId:i,continuation:r}}r.sendServiceAjax717_=r.sendServiceAjax_,r.sendServiceAjax_=function(e,o,i,r){try{const{is:r,videoId:a,continuation:l}=p(e,o,i);if((a||l)&&"ytd-video-primary-info-renderer"!==r&&console.warn("CAUTION: sendServiceAjax_ coding might have to be updated."),ce&&a&&l&&h&&g&&h===l&&g!==ce)return n.removeAdd(l),void t.delete(l);if(c&&c!==l&&l&&(_(!1),n.delete(l),t.removeAdd(l),n.removeAdd(c),t.delete(c),c=""),n&&l&&n.has(l))return;"ytd-video-primary-info-renderer"===r&&a&&l&&!t.has(l)&&t.add(l)}catch(e){console.log("Coding Error in sendServiceAjax_",e)}return this.sendServiceAjax717_(e,o,i,r)}}"function"!=typeof r.getCancellableNetworkPromise_||5!==r.getCancellableNetworkPromise_.length||r.getCancellableNetworkPromise717_||(r.getCancellableNetworkPromise717_=r.getCancellableNetworkPromise_,r.getCancellableNetworkPromise_=function(e,i,r,m,w){try{const{is:e,videoId:w,continuation:v}=p(i,r,m);if((w||v)&&"ytd-video-primary-info-renderer"!==e&&console.warn("CAUTION: getCancellableNetworkPromise_ coding might have to be updated."),ce&&w&&v&&h&&g&&h===v&&g!==ce)return n.removeAdd(v),void t.delete(v);c&&c!==v&&v&&(_(!1),n.delete(v),t.removeAdd(v),n.removeAdd(c),t.delete(c),c="");const C=v;if(n&&C&&"string"==typeof C&&n.has(C))return;"string"==typeof C&&o!==C?(o=C,s=C,c===C&&(c=""),l=0):"string"==typeof C&&o&&o===C&&(l>1e9&&(l=1e4),++l,l>=3&&n.size>0&&d.resolve(C).then(b).catch(console.warn),5===l&&(t.clear(),t.add(C))),"string"==typeof C&&C&&(ce||ue.videoId)&&(f=C,y=ce||ue.videoId),u&&(a(u),u=0)}catch(w){console.log("Coding Error in getCancellableNetworkPromise_",w)}return this.getCancellableNetworkPromise717_(e,i,r,m,w)})}function b(e){e===o&&e===h&&e===f&&n.size&&(n.size,n.forEach(((t,o)=>{o!==e&&n.delete(o)})))}})),C("ytd-expander").then((()=>{let e,t;e=document.createElement("ytd-expander"),t=m(e).constructor.prototype,oe(t.initChildrenObserver,"0.48.21")&&oe(t.childrenChanged,"0.40.22")&&(t.initChildrenObserver14=t.initChildrenObserver,t.childrenChanged14=t.childrenChanged,t.initChildrenObserver=function(){var e=this;this.observer=new MutationObserver((function(){e.childrenChanged()})),this.observer.observe(this.content,{subtree:!0,childList:!0,attributes:!0,characterData:!0}),this.childrenChanged()},t.childrenChanged=function(){this.alwaysToggleable?this.canToggle=this.alwaysToggleable:this.canToggleJobId||(this.canToggleJobId=1,T().then((()=>{this.canToggleJobId=0,this.calculateCanCollapse()})))},console.debug("ytd-expander-fix-childrenChanged"))})),C("paper-ripple").then((()=>{let e,t;e=document.createElement("paper-ripple"),t=m(e).constructor.prototype,oe(t.animate,"0.74.5")&&(t.animate34=t.animate,t.animate=function(){if(this._animating){var e;const n=this.ripples;for(e=0;e<n.length;++e){var t=n[e];t.draw(),this.$.background.style.opacity=t.outerOpacity,t.isOpacityFullyDecayed&&!t.isRestingAtMaxRadius&&this.removeRipple(t)}(this.shouldKeepAnimating||0)!==n.length?(this._boundAnimate38||(this._boundAnimate38=this.animate.bind(this)),T().then(this._boundAnimate38)):this.onAnimationComplete()}},console.debug("FIX_paper_ripple_animate"))}));{const e=function(t,n){if(1!==e.m511||n)return r.apply(window,arguments);e.m511=2,e.m568=t},t=function(t){const n=t+"";if(n.startsWith("function(){setTimeout(function(){")&&n.endsWith("})}")){let n=null;e.m511=1,t(),2===e.m511&&(n=e.m568,e.m568=null),e.m511=0,"function"==typeof n&&T().then(n)}else{if(!n.includes("requestAninmationFrameResolver"))return i.apply(window,arguments);T().then(t)}};let n=!1;const o=function(){if(!this)return;if(n)return this.doIdomRender13(...arguments);n=!0;const{requestAnimationFrame:o,setTimeout:i}=window;window.requestAnimationFrame=t,window.setTimeout=e;let r=this.doIdomRender13(...arguments);return window.requestAnimationFrame=o,window.setTimeout=i,n=!1,r};for(const e of["ytd-lottie-player","yt-attributed-string","yt-image","yt-icon-shape","yt-button-shape","yt-button-view-model","yt-icon-badge-shape"])C(e).then((()=>{let t,n;t=document.createElement(e),n=m(t).constructor.prototype,n.doIdomRender13=n.doIdomRender,n.doIdomRender=o,n.doIdomRender13===n.templatingFn&&(n.templatingFn=o),console.debug("[yt-js-engine-tamer] FIX_doIdomRender",e)}))}}))})),ee){if(console.groupCollapsed("%cYouTube JS Engine Tamer","background-color: #EDE43B ; color: #000 ; font-weight: bold ; padding: 4px ;"),console.log("Script is loaded."),console.log("This script changes the core mechanisms of the YouTube JS engine."),console.log("This script is experimental and subject to further changes."),console.log("This might boost your YouTube performance."),console.log("CAUTION: This might break your YouTube."),J.length>=1){console.log(" =========================================================================== ");for(const e of J)console.log(e);console.log(" =========================================================================== ")}console.groupEnd()}})();
