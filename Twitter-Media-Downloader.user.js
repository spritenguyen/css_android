// ==UserScript==
// @name        Twitter Media Downloader
// @name:ja     Twitter Media Downloader
// @name:zh-cn  Twitter Â™í‰Ωì‰∏ãËΩΩ
// @name:zh-tw  Twitter Â™íÈ´î‰∏ãËºâ
// @description    Save Video/Photo by One-Click.
// @description:ja „ÉØ„É≥„ÇØ„É™„ÉÉ„ÇØ„ÅßÂãïÁîª„ÉªÁîªÂÉè„Çí‰øùÂ≠ò„Åô„Çã„ÄÇ
// @description:zh-cn ‰∏ÄÈîÆ‰øùÂ≠òËßÜÈ¢ë/ÂõæÁâá
// @description:zh-tw ‰∏ÄÈçµ‰øùÂ≠òË¶ñÈ†ª/ÂúñÁâá
// @version     1.27
// @author      AMANE
// @namespace   none
// @match       https://twitter.com/*
// @match       https://mobile.twitter.com/*
// @grant       GM_registerMenuCommand
// @grant       GM_setValue
// @grant       GM_getValue
// @grant       GM_download
// @compatible  Chrome
// @compatible  Firefox
// @license     MIT
// @downloadURL 
// @updateURL 
// ==/UserScript==
const filename="twitter_{user-name}(@{user-id})_{date-time}_{status-id}_{file-type}",TMD=function(){let e,t,i,n,a;return{init:async function(){GM_registerMenuCommand((this.language[navigator.language]||this.language.en).settings,this.settings),e=this.language[document.querySelector("html").lang]||this.language.en,t=location.hostname,a=t.indexOf("tweetdeck")>=0,i=this.storage_obsolete(),i.length?(this.storage(i),this.storage_obsolete(!0)):i=await this.storage(),n=GM_getValue("show_sensitive",!1),document.head.insertAdjacentHTML("beforeend","<style>"+this.css+(n?this.css_ss:"")+"</style>"),new MutationObserver((e=>e.forEach((e=>e.addedNodes.forEach((e=>this.detect(e))))))).observe(document.body,{childList:!0,subtree:!0})},detect:function(e){let t="ARTICLE"==e.tagName&&e||"DIV"==e.tagName&&(e.querySelector("article")||e.closest("article"));t&&this.addButtonTo(t);let i="LI"==e.tagName&&"listitem"==e.getAttribute("role")&&[e]||"DIV"==e.tagName&&e.querySelectorAll('li[role="listitem"]');i&&this.addButtonToMedia(i)},addButtonTo:function(t){if(t.dataset.detected)return;t.dataset.detected="true";if(t.querySelector(['a[href*="/photo/1"]','div[role="progressbar"]','div[data-testid="playButton"]','a[href="/settings/content_you_see"]',"div.media-image-container","div.media-preview-container",'div[aria-labelledby]>div:first-child>div[role="button"][tabindex="0"]'].join(","))){let o=t.querySelector('a[href*="/status/"]').href.split("/status/").pop().split("/").shift(),l=t.querySelector('div[role="group"]:last-of-type, ul.tweet-actions, ul.tweet-detail-actions'),s=Array.from(l.querySelectorAll(":scope>div>div, li.tweet-action-item>a, li.tweet-detail-action-item>a")).pop().parentNode,d=s.cloneNode(!0);a?(d.firstElementChild.innerHTML='<svg viewBox="0 0 24 24" style="width: 18px; height: 18px;">'+this.svg+"</svg>",d.firstElementChild.removeAttribute("rel"),d.classList.replace("pull-left","pull-right")):d.querySelector("svg").innerHTML=this.svg;let r=i.indexOf(o)>=0;if(this.status(d,"tmd-down"),this.status(d,r?"completed":"download",r?e.completed:e.download),l.insertBefore(d,s.nextSibling),d.onclick=()=>this.click(d,o,r),n){let e=t.querySelector('div[aria-labelledby] div[role="button"][tabindex="0"]:not([data-testid]) > div[dir] > span > span');e&&e.click()}}let o=t.querySelectorAll('a[href*="/photo/"]');if(o.length>1){let e=t.querySelector('a[href*="/status/"]').href.split("/status/").pop().split("/").shift(),n=t.querySelector('div[role="group"]:last-of-type');Array.from(n.querySelectorAll(":scope>div>div")).pop().parentNode;o.forEach((t=>{let n=t.href.split("/status/").pop().split("/").pop(),a=i.indexOf(e)>=0,o=document.createElement("div");o.innerHTML='<div><div><svg viewBox="0 0 24 24" style="width: 18px; height: 18px;">'+this.svg+"</svg></div></div>",o.classList.add("tmd-down","tmd-img"),this.status(o,"download"),t.parentNode.appendChild(o),o.onclick=t=>{t.preventDefault(),this.click(o,e,a,n)}}))}},addButtonToMedia:function(t){t.forEach((t=>{if(t.dataset.detected)return;t.dataset.detected="true";let n=t.querySelector('a[href*="/status/"]').href.split("/status/").pop().split("/").shift(),a=i.indexOf(n)>=0,o=document.createElement("div");o.innerHTML='<div><div><svg viewBox="0 0 24 24" style="width: 18px; height: 18px;">'+this.svg+"</svg></div></div>",o.classList.add("tmd-down","tmd-media"),this.status(o,a?"completed":"download",a?e.completed:e.download),t.appendChild(o),o.onclick=()=>this.click(o,n,a)}))},click:async function(t,n,a,o){if(t.classList.contains("loading"))return;this.status(t,"loading");let l=(await GM_getValue("filename",filename)).split("\n").join(""),s=await GM_getValue("save_history",!0),d=await this.fetchJson(n),r=d.legacy,c=d.core.user_results.result.legacy,h={"\\":"Ôºº","/":"Ôºè","|":"ÔΩú","<":"Ôºú",">":"Ôºû",":":"Ôºö","*":"Ôºä","?":"Ôºü",'"':"ÔºÇ","‚Äã":"","‚Äå":"","‚Äç":"","‚Å†":"","\ufeff":"","üîû":""},g=l.match(/{date-time(-local)?:[^{}]+}/)?l.match(/{date-time(?:-local)?:([^{}]+)}/)[1].replace(/[\\/|<>*?:"]/g,(e=>h[e])):"YYYYMMDD-hhmmss",m={};m["status-id"]=n,m["user-name"]=c.name.replace(/([\\/|*?:"]|[\u200b-\u200d\u2060\ufeff]|üîû)/g,(e=>h[e])),m["user-id"]=c.screen_name,m["date-time"]=this.formatDate(r.created_at,g),m["date-time-local"]=this.formatDate(r.created_at,g,!0),m["full-text"]=r.full_text.split("\n").join(" ").replace(/\s*https:\/\/t\.co\/\w+/g,"").replace(/[\\/|<>*?:"]|[\u200b-\u200d\u2060\ufeff]/g,(e=>h[e]));let p=r.extended_entities&&r.extended_entities.media;if(o&&(p=[p[o-1]]),p.length>0){let d=p.length,r=[];p.forEach(((c,h)=>{m.url="photo"==c.type?c.media_url_https+":orig":c.video_info.variants.filter((e=>"video/mp4"==e.content_type)).sort(((e,t)=>t.bitrate-e.bitrate))[0].url,m.file=m.url.split("/").pop().split(/[:?]/).shift(),m["file-name"]=m.file.split(".").shift(),m["file-ext"]=m.file.split(".").pop(),m["file-type"]=c.type.replace("animated_",""),m.out=(l.replace(/\.?{file-ext}/,"")+((p.length>1||o)&&!l.match("{file-name}")?"-"+(o?o-1:h):"")+".{file-ext}").replace(/{([^{}:]+)(:[^{}]+)?}/g,((e,t)=>m[t])),this.downloader.add({url:m.url,name:m.out,onload:()=>{d-=1,r.push((p.length>1||o?(o||h+1)+": ":"")+e.completed),this.status(t,null,r.sort().join("\n")),0===d&&(this.status(t,"completed",e.completed),s&&!a&&(i.push(n),this.storage(n)))},onerror:e=>{d=-1,r.push((p.length>1?h+1+": ":"")+e.details.current),this.status(t,"failed",r.sort().join("\n"))}})}))}else this.status(t,"failed","MEDIA_NOT_FOUND")},status:function(e,t,i,n){t&&(e.classList.remove("download","completed","loading","failed"),e.classList.add(t)),i&&(e.title=i),n&&(e.style.cssText=n)},settings:async function(){const t=(e,t,i,n,a)=>{let o=document.createElement(t);return i&&(o.style.cssText=i),void 0!==n&&("input"==t?"checkbox"==n?o.type=n:o.value=n:o.innerHTML=n),a&&a.split(" ").forEach((e=>o.classList.add(e))),e.appendChild(o),o};let a,o=t(document.body,"div","position: fixed; left: 0px; top: 0px; width: 100%; height: 100%; background-color: #0009; z-index: 10;");o.onmousedown=e=>{a=e.target==o},o.onmouseup=e=>{a&&e.target==o&&o.remove()};let l=t(o,"div","position: absolute; left: 50%; top: 50%; transform: translateX(-50%) translateY(-50%); width: fit-content; width: -moz-fit-content; background-color: #f3f3f3; border: 1px solid #ccc; border-radius: 10px; color: black;"),s=t(l,"h3","margin: 10px 20px;",e.dialog.title),d=t(l,"div","margin: 10px; border: 1px solid #ccc; border-radius: 5px;"),r=t(d,"label","display: block; margin: 10px;",e.dialog.save_history),c=t(r,"input","float: left;","checkbox");c.checked=await GM_getValue("save_history",!0),c.onchange=()=>{GM_setValue("save_history",c.checked)},t(r,"label","display: inline-block; margin: 0 10px; color: blue;",e.dialog.clear_history).onclick=()=>{confirm(e.dialog.clear_confirm)&&(i=[],GM_setValue("download_history",[]))};let h=t(d,"label","display: block; margin: 10px;",e.dialog.show_sensitive),g=t(h,"input","float: left;","checkbox");g.checked=await GM_getValue("show_sensitive",!1),g.onchange=()=>{n=g.checked,GM_setValue("show_sensitive",n)};let m=t(l,"div","margin: 10px; border: 1px solid #ccc; border-radius: 5px;"),p=t(m,"label","display: block; margin: 10px 15px;",e.dialog.pattern),u=t(p,"textarea","display: block; min-width: 500px; max-width: 500px; min-height: 100px; font-size: inherit; background: white; color: black;",await GM_getValue("filename",filename)),f=t(m,"label","display: table; margin: 10px;",'\n<span class="tmd-tag" title="user name">{user-name}</span>\n<span class="tmd-tag" title="The user name after @ sign.">{user-id}</span>\n<span class="tmd-tag" title="example: 1234567890987654321">{status-id}</span>\n<span class="tmd-tag" title="{date-time} : Posted time in UTC.\n{date-time-local} : Your local time zone.\n\nDefault:\nYYYYMMDD-hhmmss => 20201231-235959\n\nExample of custom:\n{date-time:DD-MMM-YY hh.mm} => 31-DEC-21 23.59">{date-time}</span><br>\n<span class="tmd-tag" title="Text content in tweet.">{full-text}</span>\n<span class="tmd-tag" title="Type of &#34;video&#34; or &#34;photo&#34; or &#34;gif&#34;.">{file-type}</span>\n<span class="tmd-tag" title="Original filename from URL.">{file-name}</span>\n');u.selectionStart=u.value.length,f.querySelectorAll(".tmd-tag").forEach((e=>{e.onclick=()=>{let t=u.selectionStart,i=u.selectionEnd;u.value=u.value.substring(0,t)+e.innerText+u.value.substring(i),u.selectionStart=t+e.innerText.length,u.selectionEnd=t+e.innerText.length,u.focus()}})),t(s,"label","float: right;",e.dialog.save,"tmd-btn").onclick=async()=>{await GM_setValue("filename",u.value),o.remove()}},fetchJson:async function(e){let i={focalTweetId:e,with_rux_injections:!1,includePromotedContent:!0,withCommunity:!0,withQuickPromoteEligibilityTweetFields:!0,withBirdwatchNotes:!0,withVoice:!0,withV2Timeline:!0},n=encodeURI(`${`https://${t}/i/api/graphql/NmCeCgkVlsRGS1cAwqtgmw/TweetDetail`}?variables=${JSON.stringify(i)}&features=${JSON.stringify({rweb_lists_timeline_redesign_enabled:!0,responsive_web_graphql_exclude_directive_enabled:!0,verified_phone_label_enabled:!1,creator_subscriptions_tweet_preview_api_enabled:!0,responsive_web_graphql_timeline_navigation_enabled:!0,responsive_web_graphql_skip_user_profile_image_extensions_enabled:!1,tweetypie_unmention_optimization_enabled:!0,responsive_web_edit_tweet_api_enabled:!0,graphql_is_translatable_rweb_tweet_is_translatable_enabled:!0,view_counts_everywhere_api_enabled:!0,longform_notetweets_consumption_enabled:!0,responsive_web_twitter_article_tweet_consumption_enabled:!1,tweet_awards_web_tipping_enabled:!1,freedom_of_speech_not_reach_fetch_enabled:!0,standardized_nudges_misinfo:!0,tweet_with_visibility_results_prefer_gql_limited_actions_policy_enabled:!0,longform_notetweets_rich_text_read_enabled:!0,longform_notetweets_inline_media_enabled:!0,responsive_web_media_download_video_enabled:!1,responsive_web_enhance_cards_enabled:!1})}`),a=this.getCookie(),o={authorization:"Bearer AAAAAAAAAAAAAAAAAAAAANRILgAAAAAAnNwIzUejRCOuH5E6I8xnZz4puTs%3D1Zv7ttfk8LF81IUq16cHjhLTvJu4FA33AGWWjCpTnA","x-twitter-active-user":"yes","x-twitter-client-language":a.lang,"x-csrf-token":a.ct0};32==a.ct0.length&&(o["x-guest-token"]=a.gt);let l=(await fetch(n,{headers:o}).then((e=>e.json()))).data.threaded_conversation_with_injections_v2.instructions[0].entries.find((t=>t.entryId==`tweet-${e}`)).content.itemContent.tweet_results.result;return l.tweet||l},getCookie:function(e){let t={};return document.cookie.split(";").filter((e=>e.indexOf("=")>0)).forEach((e=>{e.replace(/^([^=]+)=(.+)$/,((e,i,n)=>{t[i.trim()]=n.trim()}))})),e?t[e]:t},storage:async function(e){let t=await GM_getValue("download_history",[]),i=t.length;if(!e)return t;Array.isArray(e)?t=t.concat(e):t.indexOf(e)<0&&t.push(e),t.length>i&&GM_setValue("download_history",t)},storage_obsolete:function(e){let t=JSON.parse(localStorage.getItem("history")||"[]");if(!e)return t;localStorage.removeItem("history")},formatDate:function(e,t,i){let n=new Date(e);i&&n.setMinutes(n.getMinutes()-n.getTimezoneOffset());let a={YYYY:n.getUTCFullYear().toString(),YY:n.getUTCFullYear().toString(),MM:n.getUTCMonth()+1,MMM:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][n.getUTCMonth()],DD:n.getUTCDate(),hh:n.getUTCHours(),mm:n.getUTCMinutes(),ss:n.getUTCSeconds(),h2:n.getUTCHours()%12,ap:n.getUTCHours()<12?"AM":"PM"};return t.replace(/(YY(YY)?|MMM?|DD|hh|mm|ss|h2|ap)/g,(e=>("0"+a[e]).substr(-e.length)))},downloader:function(){let e,t=[],i=0,n=2,a=0,o=0,l=!1;return{add:function(e){t.push(e),i<n?(i+=1,this.next()):this.update()},next:async function(){let e=t.shift();await this.start(e),t.length>0&&i<=n?this.next():i-=1,this.update()},start:function(e){return this.update(),new Promise((t=>{GM_download({url:e.url,name:e.name,onload:i=>{e.onload(),t()},onerror:i=>{this.retry(e,i),t()},ontimeout:i=>{this.retry(e,i),t()}})}))},retry:function(e,t){a+=1,3==a&&(n=1),e.retry&&e.retry>=2||t.details&&"USER_CANCELED"==t.details.current?(e.onerror(t),o+=1):(1==n&&(e.retry=(e.retry||0)+1),this.add(e))},update:function(){if(e||(e=document.createElement("div"),e.title="Twitter Media Downloader",e.classList.add("tmd-notifier"),e.innerHTML="<label>0</label>|<label>0</label>",document.body.appendChild(e)),o>0&&!l){l=!0,e.innerHTML+="|";let t=document.createElement("label");e.appendChild(t),t.onclick=()=>{e.innerHTML="<label>0</label>|<label>0</label>",o=0,l=!1,this.update()}}e.firstChild.innerText=i,e.firstChild.nextElementSibling.innerText=t.length,o>0&&(e.lastChild.innerText=o),i>0||t.length>0||o>0?e.classList.add("running"):e.classList.remove("running")}}}(),language:{en:{download:"Download",completed:"Download Completed",settings:"Settings",dialog:{title:"Download Settings",save:"Save",save_history:"Remember download history",clear_history:"(Clear)",clear_confirm:"Clear download history?",show_sensitive:"Always show sensitive content",pattern:"File Name Pattern"}},ja:{download:"„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ",completed:"„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÂÆå‰∫Ü",settings:"Ë®≠ÂÆö",dialog:{title:"„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâË®≠ÂÆö",save:"‰øùÂ≠ò",save_history:"„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÂ±•Ê≠¥„Çí‰øùÂ≠ò„Åô„Çã",clear_history:"(„ÇØ„É™„Ç¢)",clear_confirm:"„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÂ±•Ê≠¥„ÇíÂâäÈô§„Åô„ÇãÔºü",show_sensitive:"„Çª„É≥„Ç∑„ÉÜ„Ç£„Éñ„Å™ÂÜÖÂÆπ„ÇíÂ∏∏„Å´Ë°®Á§∫„Åô„Çã",pattern:"„Éï„Ç°„Ç§„É´Âêç„Éë„Çø„Éº„É≥"}},zh:{download:"‰∏ãËΩΩ",completed:"‰∏ãËΩΩÂÆåÊàê",settings:"ËÆæÁΩÆ",dialog:{title:"‰∏ãËΩΩËÆæÁΩÆ",save:"‰øùÂ≠ò",save_history:"‰øùÂ≠ò‰∏ãËΩΩËÆ∞ÂΩï",clear_history:"(Ê∏ÖÈô§)",clear_confirm:"Á°ÆËÆ§Ë¶ÅÊ∏ÖÈô§‰∏ãËΩΩËÆ∞ÂΩïÔºü",show_sensitive:"Ëá™Âä®ÊòæÁ§∫ÊïèÊÑüÁöÑÂÜÖÂÆπ",pattern:"Êñá‰ª∂ÂêçÊ†ºÂºè"}},"zh-Hant":{download:"‰∏ãËºâ",completed:"‰∏ãËºâÂÆåÊàê",settings:"Ë®≠ÁΩÆ",dialog:{title:"‰∏ãËºâË®≠ÁΩÆ",save:"‰øùÂ≠ò",save_history:"‰øùÂ≠ò‰∏ãËºâË®òÈåÑ",clear_history:"(Ê∏ÖÈô§)",clear_confirm:"Á¢∫Ë™çË¶ÅÊ∏ÖÈô§‰∏ãËºâË®òÈåÑÔºü",show_sensitive:"Ëá™ÂãïÈ°ØÁ§∫ÊïèÊÑüÁöÑÂÜÖÂÆπ",pattern:"Êñá‰ª∂ÂêçË¶èÂâá"}}},css:'\n.tmd-down {margin-left: 12px; order: 99;}\n.tmd-down:hover > div > div > div > div {color: rgba(29, 161, 242, 1.0);}\n.tmd-down:hover > div > div > div > div > div {background-color: rgba(29, 161, 242, 0.1);}\n.tmd-down:active > div > div > div > div > div {background-color: rgba(29, 161, 242, 0.2);}\n.tmd-down:hover svg {color: rgba(29, 161, 242, 1.0);}\n.tmd-down:hover div:first-child:not(:last-child) {background-color: rgba(29, 161, 242, 0.1);}\n.tmd-down:active div:first-child:not(:last-child) {background-color: rgba(29, 161, 242, 0.2);}\n.tmd-down.tmd-media {position: absolute; right: 0;}\n.tmd-down.tmd-media > div {display: flex; border-radius: 99px; margin: 2px;}\n.tmd-down.tmd-media > div > div {display: flex; margin: 6px; color: #fff;}\n.tmd-down.tmd-media:hover > div {background-color: rgba(255,255,255, 0.6);}\n.tmd-down.tmd-media:hover > div > div {color: rgba(29, 161, 242, 1.0);}\n.tmd-down.tmd-media:not(:hover) > div > div {filter: drop-shadow(0 0 1px #000);}\n.tmd-down g {display: none;}\n.tmd-down.download g.download, .tmd-down.completed g.completed, .tmd-down.loading g.loading,.tmd-down.failed g.failed {display: unset;}\n.tmd-down.loading svg {animation: spin 1s linear infinite;}\n@keyframes spin {0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);}}\n.tmd-btn {display: inline-block; background-color: #1DA1F2; color: #FFFFFF; padding: 0 20px; border-radius: 99px;}\n.tmd-tag {display: inline-block; background-color: #FFFFFF; color: #1DA1F2; padding: 0 10px; border-radius: 10px; border: 1px solid #1DA1F2;  font-weight: bold; margin: 5px;}\n.tmd-btn:hover {background-color: rgba(29, 161, 242, 0.9);}\n.tmd-tag:hover {background-color: rgba(29, 161, 242, 0.1);}\n.tmd-notifier {display: none; position: fixed; left: 16px; bottom: 16px; color: #000; background: #fff; border: 1px solid #ccc; border-radius: 8px; padding: 4px;}\n.tmd-notifier.running {display: flex; align-items: center;}\n.tmd-notifier label {display: inline-flex; align-items: center; margin: 0 8px;}\n.tmd-notifier label:before {content: " "; width: 32px; height: 16px; background-position: center; background-repeat: no-repeat;}\n.tmd-notifier label:nth-child(1):before {background-image:url("data:image/svg+xml;charset=utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2216%22 height=%2216%22 viewBox=%220 0 24 24%22><path d=%22M3,14 v5 q0,2 2,2 h14 q2,0 2,-2 v-5 M7,10 l4,4 q1,1 2,0 l4,-4 M12,3 v11%22 fill=%22none%22 stroke=%22%23666%22 stroke-width=%222%22 stroke-linecap=%22round%22 /></svg>");}\n.tmd-notifier label:nth-child(2):before {background-image:url("data:image/svg+xml;charset=utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2216%22 height=%2216%22 viewBox=%220 0 24 24%22><path d=%22M12,2 a1,1 0 0 1 0,20 a1,1 0 0 1 0,-20 M12,5 v7 h6%22 fill=%22none%22 stroke=%22%23999%22 stroke-width=%222%22 stroke-linejoin=%22round%22 stroke-linecap=%22round%22 /></svg>");}\n.tmd-notifier label:nth-child(3):before {background-image:url("data:image/svg+xml;charset=utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2216%22 height=%2216%22 viewBox=%220 0 24 24%22><path d=%22M12,0 a2,2 0 0 0 0,24 a2,2 0 0 0 0,-24%22 fill=%22%23f66%22 stroke=%22none%22 /><path d=%22M14.5,5 a1,1 0 0 0 -5,0 l0.5,9 a1,1 0 0 0 4,0 z M12,17 a2,2 0 0 0 0,5 a2,2 0 0 0 0,-5%22 fill=%22%23fff%22 stroke=%22none%22 /></svg>");}\n.tmd-down.tmd-img {position: absolute; right: 0; bottom: 0; display: none !important;}\n.tmd-down.tmd-img > div {display: flex; border-radius: 99px; margin: 2px; background-color: rgba(255,255,255, 0.6);}\n.tmd-down.tmd-img > div > div {display: flex; margin: 6px; color: #fff !important;}\n.tmd-down.tmd-img:not(:hover) > div > div {filter: drop-shadow(0 0 1px #000);}\n.tmd-down.tmd-img:hover > div > div {color: rgba(29, 161, 242, 1.0);}\n:hover > .tmd-down.tmd-img, .tmd-img.loading, .tmd-img.completed, .tmd-img.failed {display: block !important;}\n.tweet-detail-action-item {width: 20% !important;}\n',css_ss:'\n/* show sensitive in media tab */\nli[role="listitem"]>div>div>div>div:not(:last-child) {filter: none;}\nli[role="listitem"]>div>div>div>div+div:last-child {display: none;}\n',svg:'\n<g class="download"><path d="M3,14 v5 q0,2 2,2 h14 q2,0 2,-2 v-5 M7,10 l4,4 q1,1 2,0 l4,-4 M12,3 v11" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" /></g>\n<g class="completed"><path d="M3,14 v5 q0,2 2,2 h14 q2,0 2,-2 v-5 M7,10 l3,4 q1,1 2,0 l8,-11" fill="none" stroke="#1DA1F2" stroke-width="2" stroke-linecap="round" /></g>\n<g class="loading"><circle cx="12" cy="12" r="10" fill="none" stroke="#1DA1F2" stroke-width="4" opacity="0.4" /><path d="M12,2 a10,10 0 0 1 10,10" fill="none" stroke="#1DA1F2" stroke-width="4" stroke-linecap="round" /></g>\n<g class="failed"><circle cx="12" cy="12" r="11" fill="#f33" stroke="currentColor" stroke-width="2" opacity="0.8" /><path d="M14,5 a1,1 0 0 0 -4,0 l0.5,9.5 a1.5,1.5 0 0 0 3,0 z M12,17 a2,2 0 0 0 0,4 a2,2 0 0 0 0,-4" fill="#fff" stroke="none" /></g>\n'}}();TMD.init();
